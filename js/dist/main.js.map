{"version":3,"sources":["custom.js","map-death.js","map-composite.js","lines-fent.js","lines-bsas.js","bars-race.js","queue.js","maps-substance.js","lines-death.js","blocks-substance-pie.js","blocks-gender.js","bars-age.js"],"names":["parallax","speed","document","querySelectorAll","window","onscroll","i","length","$offset","$","offset","$windowYOffset","height","pageYOffset","top","extraY","elBackgrounPos","style","backgroundPosition","collapseNavbar","addClass","removeClass","app","queue","defer","d3","json","awaitAll","generateMap","error","results","getYear","setSymbology","on","this","val","year","szAttr","html","parseInt","svgContainer","selectAll","transition","duration","d","delta","properties","OPIOIDSTATS","opChgScale","generateLegend","scale","szDivId","szCaption","width","svg","select","append","attr","g","legendData","push","r","s","domain","range","domainStrings","data","enter","text","maTowns","maOpioid","features","town","TOWN","console","log","alert","threshold","Infinity","colorbrewer","Blues","projection","geo","conicConformal","parallels","rotate","translate","geoPath","path","mouse","node","map","string_base","currentvalue","concat","currentyear","currentrate","format","tooltip","classed","toTitleCase","click","app2","generateMap2","str","replace","txt","charAt","toUpperCase","substr","toLowerCase","setSymbology2","generateLegend2","width2","height2","tooltip2","RdPu","notify","selector","eventName","forEach","el","shape","toyear","eval","aYears","index","Ctrl","$scope","date","Date","date2","date3","date4","date5","date6","date7","date8","date9","chartData","Fentanyl","Heroin","Benzodiazepine","Cocaine","myData","type","keys","key","groups","age","value","values","wrap","each","word","words","split","reverse","line","lineNumber","lineHeight","y","dy","parseFloat","tspan","pop","join","getComputedTextLength","parallelism","popping","started","tasks","active","t","a","slice","call","callback","apply","e","remaining","NaN","await","all","q","noop","arguments","f","version","define","amd","module","exports","createElement","scroll","ready","bind","event","$anchor","stop","animate","scrollTop","preventDefault","$id","$current","parent","find","location","pathname","hostname","target","hash","tab","get","play","load","response","asignVal_svg","val_svg","Vis","visualize","states","visualizationWrapper","wrapper","createMap","$maps_sub","palette","self","town_value","geoData","parentNode","getElementsByTagName","innerHTML","fill-opacity","generateLegend_map_sub","$maps_sub_svg","$maps_sub_legends","YlOrBr","margin","right","bottom","left","MDG","Massachusetts","UnitedStates","dateFormat","time","xScale","yScale","sqrt","xAxis_death","axis","orient","ticks","tickFormat","innerTickSize","yAxis_death","tooltip_death","line_death","x","parse","rate","defined","$lines_death","csv","mouseoutFunc","mouseoverFunc","FullName","mousemoveFunc","pageY","pageX","years","dataset","OMRs","Geography","rates","extent","max","inArray","angular","directive","$parse","restrict","scope","groupChartData","link","element","attrs","$watch","newVal","oldVal","symbol","size","tooltipFent","focus","y0","y1","Math","round","invert","percentVal","x0","canvasId","chartTitle","yearformat","quarter","setMonth","getMonth","ceil","seriesColors","seriesLineStrokes","seriesLineDash","seriesPointShapes","seriesPointWidth","seriesPointFill","xLabel","canvasWidth","canvasHeight","parseDate","bisector","ordinal","rangePoints","x2","linear","color","lineStroke","lineDash","pointShape","pointWidth","pointFill","xAxis_fent","months","xAxis2_fent","tickSize","yAxis_fent","tickPadding","label","$lines_fent","varSeries","filter","seriesData","name","min","c","series","town_names","current_town","margin_bsas","width_bsas","height_bsas","bisectAge","percent","category10","xAxis_bsas","outerTickSize","yAxis_bsas","$lines_bsas","update","delay","string_select","value_select","mousemove","i_alcohol","d0_alcohol","d1_alcohol","d_alcohol","focusalcohol","i_marijuana","d0_marijuana","d1_marijuana","d_marijuana","focusmarijuana","i_none","d0_none","d1_none","d_none","focusnone","i_opioids","d0_opioids","d1_opioids","d_opioids","focusopioids","i_other","d0_other","d1_other","d_other","focusother","legend_pos_text","legend_pos_dot","y_circle_alcohol","autocomplete","source","request","matches","acItem","indexOf","term","ui","item","asignVal_substance","empty","makeChart_substance","Yes","No","data_substance","blockArray_substance","noOfBlocks_No","noOfBlocks_Yes","blockArray","addBlocks_substance","addBlock_substance","id","b","getParent","getValue","getSum","_sum","arcTween","toArc","arc","toEndAngle","endAngle","_current","interpolate","startAngle","labelAnimation","centroid","fill","selectArcAnimation","_d","dist","outerRadius","midAngle","sin","cos","updatePie","getPercent","sum","toFixed","getLegend","liveLarge","angle","arcLength","PI","onMouseIn","onClick","option","description","explodedIndex","$pie_substance","_i","animateDuration","opacity","transform","labelHeight","stroke","x1","innerRadius","y2","onMouseOut","pie","arcs","isDelay","_duration","font-family","font-size","text-anchor","attrTween","class","exit","remove","legends","labelWidth","generatePie","prescription","heroin","fentanyl","both","methadone","buprenorphine","time_period","labelsWidth","layout","sort","alignment-baseline","data_pie","asignVal_gender","makeChart_gender","table_html","data_gender","noOfBlocks_gender","blockArray_gender","addBlocks_gender","addBlock_gender","noOfBlocks","multi","$option","$value","drawGraph","column","redraw","rangeBands","bars","$bars_age","gender_age","ease","rangeBand","gender","labels","selected","thisButton","raceth","2014","2015","rangeRoundBands","xAxis_bars","yAxis_bars","divtooltip_raceeth","$bars_race","options","bar","elements","l","elementData","__data__","legend"],"mappings":"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CA,WACA,YACA,aACA,QACA,WACA,UACA,QACA,YACA,SACA,OACA,OACA,aACA,QACA,SACA,UACA,cACA,aACA,UACA,UACA,SACA,cACA,UACA,YACA,aACA,YACA,SACA,SACA,SACA,aACA,UACA,WACA,YACA,WACA,cACA,YACA,WACA,aACA,WACA,cACA,YACA,WACA,aACA,YACA,WACA,aACA,YACA,SACA,WACA,SACA,aACA,WACA,UACA,aACA,UACA,WACA,UACA,eACA,WACA,WACA,aACA,UACA,WACA,UACA,UACA,SACA,aACA,SACA,UACA,YACA,SACA,YACA,SACA,UACA,UACA,QACA,SACA,SACA,YACA,UACA,kBACA,iBACA,iBACA,UACA,cACA,SACA,YACA,WACA,SACA,QACA,UACA,YACA,YACA,WACA,YACA,UACA,aACA,aACA,WACA,WACA,UACA,WACA,aACA,OACA,aACA,SACA,UACA,UACA,SACA,YACA,kBACA,aACA,SACA,YACA,SACA,UACA,WACA,UACA,UACA,UACA,SACA,WACA,UACA,UACA,WACA,YACA,SACA,QACA,UACA,WACA,WACA,SACA,UACA,YACA,UACA,WACA,YACA,cACA,SACA,OACA,aACA,UACA,WACA,YACA,YACA,eACA,WACA,MACA,YACA,QACA,aACA,WACA,YACA,SACA,UACA,YACA,aACA,SACA,SACA,YACA,OACA,YACA,SACA,aACA,YACA,aACA,SACA,cACA,aACA,UACA,eACA,UACA,WACA,UACA,SACA,UACA,SACA,WACA,UACA,gBACA,cACA,YACA,UACA,WACA,SACA,YACA,SACA,SACA,SACA,WACA,WACA,aACA,kBACA,SACA,YACA,SACA,UACA,aACA,aACA,eACA,iBACA,WACA,UACA,cACA,SACA,UACA,YACA,cACA,mBACA,iBACA,cACA,cACA,eACA,cACA,aACA,SACA,UACA,UACA,aACA,SACA,SACA,UACA,OACA,SACA,SACA,SACA,UACA,SACA,WACA,YACA,OACA,YACA,cACA,aACA,aACA,aACA,WACA,WACA,YACA,eACA,SACA,WACA,UACA,UACA,WACA,SACA,WACA,YACA,WACA,WACA,OACA,SACA,YACA,UACA,UACA,QACA,YACA,cACA,WACA,SACA,QACA,WACA,UACA,SACA,YACA,YACA,WACA,UACA,aACA,aACA,WACA,aACA,cACA,cACA,eACA,cACA,YACA,UACA,cACA,WACA,cACA,WACA,YACA,OACA,aACA,UACA,aACA,SACA,aACA,UACA,UACA,YACA,YACA,UACA,UACA,YACA,WACA,QACA,eACA,YACA,QACA,WACA,YACA,QACA,UACA,UACA,OACA,UACA,SACA,UACA,aACA,YACA,UACA,UACA,YACA,YACA,UACA,SACA,eACA,kBACA,iBACA,cACA,kBACA,kBACA,cACA,cACA,YACA,WACA,cACA,cACA,SACA,WACA,WACA,WACA,UACA,UACA,YACA,eACA,eACA,aACA,aACA,aACA,UACA,WACA,SACA,YACA,cACA,WACA,YAEAC,aAAA,gBAEAC;AACA7U,IAAA,EACAiO,MAAA,GACAC,OAAA,GACAC,KAAA,IAEA2G,WAAA,IAAAD,YAAA1G,KAAA0G,YAAA5G,MACA8G,YAAA,IAAAF,YAAA7U,IAAA6U,YAAA3G,OAEA8G,UAAArU,GAAAsS,SAAA,SAAAnR,GACA,MAAAA,GAAAyG,MACA4F,KACA8G,QAAAtU,GAAAwE,OAAA,QACA+M,WAAAvR,GAAAwE,OAAA,KAGAmD,UAEA+G,EAAA1O,GAAAyB,MAAAiR,SACAnQ,OAAA,EAAA4R,aAEA3L,EAAAxI,GAAAyB,MAAAiR,SACAnQ,OAAA6R,YAAA,IAGAzB,MAAA3S,GAAAyB,MAAA8S,aAEAC,WAAAxU,GAAA6B,IAAAqM,OACAzM,MAAAiN,GACAL,WAAAkD,YACApD,OAAA,UACAsG,cAAA,GAEAC,WAAA1U,GAAA6B,IAAAqM,OACAzM,MAAA+G,GACA4K,SAAAe,YACAhG,OAAA,SACAE,WAAAiG,SAEAjM,KAAArI,GAAA6B,IAAAwG,OACAqG,EAAA,SAAAvN,GACA,MAAAuN,GAAAvN,EAAAyG,OAEAY,EAAA,SAAArH,GACA,MAAAqH,GAAArH,E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","file":"main.js","sourcesContent":["// Create HTML5 elements for IE\n\ndocument.createElement(\"article\");\ndocument.createElement(\"section\");\n\nvar speed = -80;\nparallax(speed);\n\nfunction parallax(speed) {\n\n    var parallax = document.querySelectorAll(\".parallax\");\n    // console.log(parallax[0]);\n\n    window.onscroll = function() {\n        for (var i = 0; i < parallax.length; i++) {\n\n            //var position = $(el).position();\n            // var offset = [];\n            var $offset = $(parallax[i]).offset();\n            //console.log(offset);\n            var $windowHeight = window.height;\n            var $windowYOffset = window.pageYOffset / $offset.top;\n            // $windowYOffset[0] = 0;\n            //       console.log($windowYOffset);\n            //console.log('windowYOffset: pageYOffset (' + window.pageYOffset + ') / ( window.height (' + window.height + ') - offset.top ( ' + offset.top + ' ) = ' + windowYOffset);\n            // console.log(el+\",\"+i);\n\n            var extraY = [0, -10, -60, -40, 0, -20];\n\n            var elBackgrounPos = [];\n\n            elBackgrounPos[i] = \"50% \" + (extraY[i] + $windowYOffset * speed) + \"%\";\n\n            //console.log(elBackgrounPos);\n\n            parallax[i].style.backgroundPosition = elBackgrounPos[i];\n        };\n    };\n\n};\n\n\n\n\n\n/////////////////////////////NAV\nfunction collapseNavbar() {\n    if ($(\".navbar\").offset().top > 50) {\n        $(\".navbar-fixed-top\").addClass(\"top-nav-collapse\");\n    } else {\n        $(\".navbar-fixed-top\").removeClass(\"top-nav-collapse\");\n    }\n}\n\n$(window).scroll(collapseNavbar);\n$(document).ready(collapseNavbar);\n\n// jQuery for page scrolling feature - requires jQuery Easing plugin\n$(function() {\n    $('a.page-scroll').bind('click', function(event) {\n        var $anchor = $(this);\n        $('html, body').stop().animate({\n            scrollTop: $($anchor.attr('href')).offset().top\n        }, 1500, 'easeInOutExpo');\n        event.preventDefault();\n    });\n});\n\n// Closes the Responsive Menu on Menu Item Click\n$('.navbar-collapse ul li a').click(function() {\n    if ($(this).attr('class') != 'dropdown-toggle active' && $(this).attr('class') != 'dropdown-toggle') {\n        $('.navbar-toggle:visible').click();\n    }\n});\n\n\n//when scrolling...\n$(window).scroll(function() {\n    if ($(window).scrollTop() >= 400) {\n        $(\"#navigation\").addClass(\"navbar-fixed-top\");\n    } else {\n        $(\"#navigation\").removeClass(\"navbar-fixed-top\");\n    };\n\n\n    $('.target').each(function() {\n        if ($(window).scrollTop() >= ($(this).offset().top) - 10) {\n            var $id = $(this).attr('id');\n            $('#navigation li').removeClass('active');\n            $('#navigation li[id=' + $id + '1]').addClass('active');\n\n            var $current = $(this).attr('data-index');\n            // var $current = $(this).find('.section-title').text();\n            $('#current-section').html($current);\n        }\n    });\n\n});\n\n$(\"#navigation li\").on('click', function() {\n    $(this).parent().find(\"li\").removeClass(\"active\");\n    $(this).addClass(\"active\");\n});\n\n\n\n$('a[href*=#]:not([href=#])').click(function() {\n    if (location.pathname.replace(/^\\//, '') == this.pathname.replace(/^\\//, '') || location.hostname == this.hostname) {\n\n        var target = $(this.hash);\n        target = target.length ? target : $('[name=' + this.hash.slice(1) + ']');\n        if (target.length) {\n            $('html,body').animate({\n                scrollTop: target.offset().top\n            }, 500);\n            return false;\n        }\n    }\n    // });\n\n\n});\n\n\n/////////////////////////////Accordion\n// $(function() {\n//     var icons = {\n//         header: \"iconClosed\",\n//         activeHeader: \"iconOpen\",\n//         hoverHeader: 'iconHover'\n\n//     };\n//     $(\"#accordion\").accordion({\n//         icons: icons,\n//         heightStyle: \"content\"\n//     });\n// });\n\n/////////////////////////////Pills\n\n$('#pills-first a').click(function(e) {\n    e.preventDefault()\n    $(this).tab('show')\n});\n\n\n/////////////////////////////Video Links\n$('#play1').click(function() {\n    $(\"#video1\").get(0).play();\n});\n$('#play2').click(function() {\n    $(\"#video2\").get(0).play();\n});\n\n/////////////////////////////SVG Infographic\n$(function() {\n    $(\"#svg-infographic\").load('img/human1.svg', function(response) {\n        var val_svg = '2/3';\n        asignVal_svg(val_svg);\n\n        function asignVal_svg(val) {\n            $('.btn-svg').removeClass('active');\n            $('.btn-svg[value=\"' + val + '\"]').addClass('active');\n            if (val == '1/12') {\n                $('.svg-studyperiod').attr(\"opacity\", 0);\n                $('.svg-onemonth').attr(\"opacity\", 1);\n                $('#svg-info').html('Only about '+ '<strong>1 in 12</strong>' +' people who died from opioids had an active opioid prescription a month before they died')\n            } else {\n                $('.svg-studyperiod').attr(\"opacity\", 1);\n                $('#svg-info').html('About '+ '<strong>8 in 12</strong>' +' people who died from opioids had an opioid prescription at some point during the study period')\n            }\n        }\n\n        $('.btn-svg').on('click', function() {\n            asignVal_svg($(this).val());\n        });\n\n        $('.controls-svg').on('click', function() {\n            asignVal_svg($(this).data('select'));\n        });\n    });\n});\n","$(document).ready(function() {\r\n    app();\r\n    app2();\r\n});\r\n\r\nfunction app() {\r\n    queue()\r\n        //should be town polym data\r\n        .defer(d3.json, \"js/data/TOWN.geo.json\")\r\n        //.defer(d3.json, \"us_states_5m.geo.json\")\r\n        //should be opioid death data\r\n        .defer(d3.json, \"js/data/TOWN.geo.json\")\r\n        //.defer(d3.csv, \"us_pop.csv\")\r\n        .awaitAll(generateMap);\r\n}\r\n\r\nfunction generateMap(error, results) {\r\n\r\n    //should be town polym data\r\n    var maTowns = results[0];\r\n    //var usStates = results[0];\r\n    //should be opioid death data\r\n    var maOpioid = results[1];\r\n    //var usPop = results[1];\r\n    // The data in usStates is in alpha-order by state, as is the data in usPop.\r\n    // The ASSERT test below is just a sanity-check for possible corruption.\r\n\r\n    var i;\r\n    for (i = 0; i < maTowns.features.length; i++) {\r\n        //for (i = 0; i < usStates.features.length; i++) {  \r\n        // Assert test.\r\n        if (maTowns.features[i].properties.town != maOpioid.features[i].TOWN) {\r\n            //if (usStates.features[i].properties.NAME !== usPop[i].State) {\r\n            console.log('ASSERT failure for index: ' + i);\r\n            console.log(maTowns.features[i].properties.town + ' mismatch with ' + maOpioid.features[i].TOWN);\r\n            //console.log(usStates.features[i].properties.NAME + ' mismatch with ' + usPop[i].State);\r\n            alert('Input data corrupted: generation of map terminated.');\r\n            return;\r\n        }\r\n        maTowns.features[i].properties.OPIOIDSTATS = maOpioid.features[i].properties;\r\n        //usStates.features[i].properties.POPSTATS = usPop[i];\r\n    }\r\n\r\n    var width = 960,\r\n        height = 500;\r\n\r\n    var svgContainer = d3.select(\"#map_death\").append(\"svg\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .style(\"border\", \"0px solid steelblue\");\r\n\r\n    var opChgScale = d3.scale.threshold()\r\n        //popChgScale = d3.scale.threshold()\r\n        .domain([0.01, 6.9, 15.9, 31.5, Infinity])\r\n        .range(colorbrewer.Blues[5]);\r\n    //.range(colorbrewer.Greens[10]);\r\n    opChgScale.domainStrings = function() {\r\n        return (['< 0.01', '0.01-6.9', '6.9-15.9',\r\n            '15.9-31.5', '>31.5'\r\n        ]);\r\n    };\r\n\r\n    var projection = d3.geo.conicConformal()\r\n        .parallels([41 + 43 / 60, 42 + 41 / 60])\r\n        .rotate([71 + 30 / 60, -41])\r\n        .scale([11000])\r\n        .translate([480, 500]);\r\n    //var projection = d3.geo.albersUsa()\r\n    //.scale(1280)\r\n    //.translate([width / 2, height / 2]);\r\n\r\n    var geoPath = d3.geo.path()\r\n        .projection(projection);\r\n\r\n\r\n\r\n    var map = svgContainer.selectAll(\"path\")\r\n        .data(maTowns.features)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", function(d, i) {\r\n            return geoPath(d);\r\n        })\r\n        .on('mousemove', function(d) {\r\n            var mouse = d3.mouse(svgContainer.node()).map(function(d) {\r\n                return parseInt(d);\r\n            });\r\n\r\n            var string_base = \"yr\"\r\n            currentvalue = string_base.concat(currentyear);\r\n\r\n            var currentrate\r\n\r\n            if (d.properties[currentvalue] > 0) {\r\n                currentrate = d3.format(\".1f\")(d.properties[currentvalue]);\r\n            } else if (d.properties[currentvalue] == 0) {\r\n                currentrate = d3.format(\".0f\")(d.properties[currentvalue]);\r\n            } else {\r\n                currentrate = \"N/A*\";\r\n            }\r\n\r\n            tooltip.classed('hidden', false)\r\n                .attr('style', 'left:' + (mouse[0] + 15) +\r\n                    'px !important; top:' + (mouse[1] + 75) + 'px !important')\r\n                .html(\"<b>\" + toTitleCase(d.properties.TOWN) + \"</b> | \" + currentrate);\r\n        })\r\n\r\n    .on('mouseover', function(d, i) {\r\n\r\n            var currentState = this;\r\n            d3.select(this).style('fill-opacity', 0.25)\r\n                .style(\"stroke\", \"white\")\r\n                .style(\"stroke-width\", \"2px\");\r\n        })\r\n        .on('mouseout', function(d, i) {\r\n            tooltip.classed('hidden', true);\r\n            d3.selectAll('path')\r\n                .style(\"fill-opacity\", 1)\r\n                .style(\"stroke\", \"#2f363d\")\r\n                .style(\"stroke-width\", \"0.1px\");\r\n        })\r\n        .style(\"stroke\", \"#2f363d\")\r\n        .style(\"stroke-width\", \"0.1px\")\r\n        .style(\"fill\", \"white\");\r\n\r\n    var aYears = [\r\n        [2000, 2001],\r\n        [2001, 2002],\r\n        [2002, 2003],\r\n        [2003, 2004],\r\n        [2004, 2005],\r\n        [2005, 2006],\r\n        [2006, 2007],\r\n        [2007, 2008],\r\n        [2008, 2009],\r\n        [2010, 2011],\r\n        [2011, 2012],\r\n        [2012, 2013],\r\n        [2013, 2014],\r\n        [2014, 2014.5]\r\n    ];\r\n\r\n    var index = 0;\r\n\r\n\r\n    getYear();\r\n    generateLegend(opChgScale, 'legend_death', 'Unintentional Opioid Deaths per 100,000 people');\r\n    //generateLegend(popChgScale, 'legend', 'Population Change (percent)');\r\n\r\n    // Bind timer event handler.\r\n    // var timerInterval = 1000;\r\n    // // var id = setInterval(setSymbology, timerInterval);\r\n\r\n\r\n\r\n\r\n    //queryVariable\r\n\r\n    // function getQueryVariable(variable)\r\n    // {\r\n    //        var query = window.location.search.substring(1);\r\n    //        var vars = query.split(\"&\");\r\n    //        for (var i=0;i<vars.length;i++) {\r\n    //                var pair = vars[i].split(\"=\");\r\n    //                if(pair[0] == variable){return pair[1];}\r\n    //        }\r\n    //        return(false);\r\n    // }\r\n    $('.controls-map').click(function() {\r\n        $(\"#timeline\").val($(this).data('select'));\r\n        setSymbology($(this).data('select'));\r\n    });\r\n\r\n    function getYear() {\r\n        setSymbology(2000);\r\n        $(\"#timeline\").on('input change', function() {\r\n            setSymbology($(this).val());\r\n        });\r\n    };\r\n\r\n    function setSymbology(year) {\r\n\r\n        var szAttr = 'yr' + year;\r\n        $('#titlePrefix').html('Unintentional Opiod Overdose Deaths in Massachusetts from');\r\n        $('#fromYear1').html(year);\r\n        $('#titleMidfix1').html(' to ');\r\n        $('#toYear').html(parseInt(year) + 1);\r\n\r\n        svgContainer.selectAll(\"path\")\r\n            .transition()\r\n            .duration(500)\r\n            .style(\"fill\", function(d, i) {\r\n\r\n                var delta = +d.properties.OPIOIDSTATS[szAttr];\r\n                //var delta = +d.properties.POPSTATS[szAttr];\r\n                return (delta === -9999) ? '#f1f1f1' : opChgScale(delta);\r\n                //return (delta === -9999) ? '#e8e8e8' : popChgScale(delta);    \r\n            });\r\n    } // setSymbology()\r\n\r\n    function generateLegend(scale, szDivId, szCaption) {\r\n        var width = 550,\r\n            height = 80;\r\n\r\n        var svg = d3.select('#' + szDivId).append(\"svg\")\r\n            .attr(\"width\", width)\r\n            .attr(\"height\", height);\r\n\r\n        var g = svg.append(\"g\");\r\n\r\n        // Create data array.\r\n        var legendData = [];\r\n        legendData.push({ d: -9999, r: '#f1f1f1', s: 'N/A' });\r\n        var i;\r\n        for (i = 0; i < scale.domain().length; i++) {\r\n            legendData.push({ d: scale.domain()[i], r: scale.range()[i], s: scale.domainStrings()[i] });\r\n        }\r\n\r\n        g.selectAll(\"rect\")\r\n            .data(legendData)\r\n            .enter().append(\"rect\")\r\n            .attr(\"height\", 20)\r\n            .attr(\"width\", 50)\r\n            .attr(\"x\", function(d, i) {\r\n                return i * 55;\r\n            })\r\n            .attr(\"y\", 20)\r\n            .style(\"stroke\", \"black\")\r\n            .style(\"stroke-width\", \"0.25px\")\r\n            .style(\"fill\", function(d, i) {\r\n                return d.r;\r\n            });\r\n\r\n        g.selectAll(\"text\")\r\n            .data(legendData)\r\n            .enter().append(\"text\")\r\n            .attr(\"x\", function(d, i) {\r\n                return i * 55;\r\n            })\r\n            .attr(\"y\", 60)\r\n            .text(function(d, i) {\r\n                return d.s;\r\n            })\r\n            .style(\"font-size\", \"12px\");\r\n\r\n        g.append(\"text\")\r\n            .attr(\"class\", \"caption\")\r\n            .attr(\"y\", 12)\r\n            .text(szCaption);\r\n    } // generateLegend()\r\n} // generateMap\r\n\r\n\r\nfunction app2() {\r\n    queue()\r\n        //should be town polym data\r\n        .defer(d3.json, \"js/data/TOWN.geo.json\")\r\n        //.defer(d3.json, \"us_states_5m.geo.json\")\r\n        //should be opioid death data\r\n        .defer(d3.json, \"js/data/TOWN.geo.json\")\r\n        //.defer(d3.csv, \"us_pop.csv\")\r\n        .awaitAll(generateMap2);\r\n}\r\n\r\nfunction generateMap2(error, results) {\r\n\r\n\r\n    var maTowns = results[0];\r\n    var maOpioid = results[1];\r\n\r\n    var currentyear\r\n\r\n    var i;\r\n    for (i = 0; i < maTowns.features.length; i++) {\r\n        if (maTowns.features[i].properties.town != maOpioid.features[i].TOWN) {\r\n            console.log('ASSERT failure for index: ' + i);\r\n            console.log(maTowns.features[i].properties.town + ' mismatch with ' + maOpioid.features[i].TOWN);\r\n            alert('Input data corrupted: generation of map terminated.');\r\n            return;\r\n        }\r\n        maTowns.features[i].properties.OPIOIDSTATS = maOpioid.features[i].properties;\r\n    }\r\n\r\n    var width = 960,\r\n        height = 450;\r\n\r\n    console.log(height);\r\n\r\n    var svgContainer = d3.select(\"#map_comp\").append(\"svg\")\r\n        .attr(\"width\", width)\r\n        .attr(\"height\", height)\r\n        .style(\"border\", \"0px solid steelblue\");\r\n\r\n    var tooltip2 = d3.select('#map_comp').append('div')\r\n        .attr('class', 'hidden tooltip2');\r\n\r\n    var opChgScale = d3.scale.threshold()\r\n        .domain([0.01, 6.9, 15.9, 31.5, Infinity])\r\n        .range(colorbrewer.RdPu[5]);\r\n    opChgScale.domainStrings = function() {\r\n        return (['< 0.01', '0.01-6.9', '6.9-15.9',\r\n            '15.9-31.5', '>31.5'\r\n        ]);\r\n    };\r\n\r\n    function toTitleCase(str) {\r\n        return str.replace(/\\w\\S*/g, function(txt) {\r\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\r\n        });\r\n    }\r\n\r\n    var projection = d3.geo.conicConformal()\r\n        .parallels([41 + 43 / 60, 42 + 41 / 60])\r\n        .rotate([71 + 30 / 60, -41])\r\n        .scale([11000])\r\n        .translate([400, 480]);\r\n\r\n    var geoPath = d3.geo.path()\r\n        .projection(projection);\r\n\r\n    var map = svgContainer.selectAll(\"path\")\r\n        .data(maTowns.features)\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"d\", function(d, i) {\r\n            return geoPath(d);\r\n        })\r\n        .on('mousemove', function(d) {\r\n            var mouse = d3.mouse(svgContainer.node()).map(function(d) {\r\n                return parseInt(d);\r\n            });\r\n            var string_base = \"yr\"\r\n            currentvalue = string_base.concat(currentyear);\r\n            var currentrate\r\n            console.log(height);\r\n\r\n            if (d.properties[currentvalue] > 0) {\r\n                currentrate = d3.format(\".1f\")(d.properties[currentvalue]);\r\n            } else if (d.properties[currentvalue] == 0) {\r\n                currentrate = d3.format(\".0f\")(d.properties[currentvalue]);\r\n            } else {\r\n                currentrate = \"N/A*\";\r\n            }\r\n\r\n            console.log(currentrate);\r\n\r\n            tooltip2.classed('hidden', false)\r\n                .attr('style', 'left:' + (mouse[0] + 15) +\r\n                    'px !important; top:' + (mouse[1] + 725) + 'px !important')\r\n                .html(\"<b>\" + toTitleCase(d.properties.TOWN) + \"</b> | \" + currentrate);\r\n        })\r\n        .on('mouseover', function(d, i) {\r\n\r\n            var currentState = this;\r\n            d3.select(this).style('fill-opacity', 0.25)\r\n                .style(\"stroke\", \"white\")\r\n                .style(\"stroke-width\", \"2px\");\r\n        })\r\n        .on('mouseout', function(d, i) {\r\n            tooltip2.classed('hidden', true);\r\n            d3.selectAll('path')\r\n                .style(\"fill-opacity\", 1)\r\n                .style(\"stroke\", \"#2f363d\")\r\n                .style(\"stroke-width\", \"0.1px\");\r\n        })\r\n        .style(\"stroke\", \"#2f363d\")\r\n        .style(\"stroke-width\", \"0.1px\")\r\n        .style(\"fill\", \"white\")\r\n        .on('mouseenter', function(d, i) {\r\n\r\n            //var string_base = \"yr\"\r\n            //currentvalue = string_base.concat(currentyear);\r\n            //console.log(d.properties[currentvalue]);\r\n        })\r\n        .on('mouseleave', function(d) {\r\n\r\n        });\r\n\r\n    var aYears = [\r\n        [2000, 2001],\r\n        [2001, 2002],\r\n        [2002, 2003],\r\n        [2003, 2004],\r\n        [2004, 2005],\r\n        [2005, 2006],\r\n        [2006, 2007],\r\n        [2007, 2008],\r\n        [2008, 2009],\r\n        [2010, 2011],\r\n        [2011, 2012],\r\n        [2012, 2013],\r\n        [2013, 2014],\r\n        [2014, 2014.5]\r\n    ];\r\n\r\n    var index = 0;\r\n    getYear();\r\n\r\n    generateLegend2(opChgScale, 'legend2', 'Composite Index Values');\r\n\r\n    function getYear() {\r\n        setSymbology2(2000);\r\n        $(\"#timeline\").on('input change', function() {\r\n            var year = $(this).val()\r\n                // $(\"#to\").html(parseInt(year) + 1);\r\n                // $(\"#from\").html(year);\r\n            setSymbology2($(this).val());\r\n        });\r\n    };\r\n\r\n\r\n    function setSymbology2(year) {\r\n\r\n        var szAttr = 'yr' + year;\r\n        currentyear = year\r\n        console.log(currentyear)\r\n        $('#titlePrefix2').html('A Composite Indicator of the Impact of the Opioid Epidemic on Massachusetts in ');\r\n        $('#fromYear2').html(year);\r\n\r\n        svgContainer.selectAll(\"path\")\r\n            .transition()\r\n            .duration(500)\r\n            .style(\"fill\", function(d, i) {\r\n\r\n                var delta = +d.properties.OPIOIDSTATS[szAttr];\r\n                return (delta === -9999) ? '#f1f1f1' : opChgScale(delta);\r\n            });\r\n    }\r\n\r\n    function generateLegend2(scale, szDivId, szCaption) {\r\n        var width2 = 550,\r\n            height2 = 80;\r\n\r\n        var svg = d3.select('#' + szDivId).append(\"svg\")\r\n            .attr(\"width\", width2)\r\n            .attr(\"height\", height2);\r\n\r\n        var g = svg.append(\"g\");\r\n\r\n        // Create data array.\r\n        var legendData = [];\r\n        legendData.push({\r\n            d: -9999,\r\n            r: '#f1f1f1',\r\n            s: 'N/A'\r\n        });\r\n        var i;\r\n        for (i = 0; i < scale.domain().length; i++) {\r\n            legendData.push({\r\n                d: scale.domain()[i],\r\n                r: scale.range()[i],\r\n                s: scale.domainStrings()[i]\r\n            });\r\n        }\r\n\r\n        g.selectAll(\"rect\")\r\n            .data(legendData)\r\n            .enter().append(\"rect\")\r\n            .attr(\"height\", 20)\r\n            .attr(\"width\", 50)\r\n            .attr(\"x\", function(d, i) {\r\n                return i * 55;\r\n            })\r\n            .attr(\"y\", 20)\r\n            .style(\"stroke\", \"black\")\r\n            .style(\"stroke-width\", \"0.25px\")\r\n            .style(\"fill\", function(d, i) {\r\n                return d.r;\r\n            });\r\n\r\n        g.selectAll(\"text\")\r\n            .data(legendData)\r\n            .enter().append(\"text\")\r\n            .attr(\"x\", function(d, i) {\r\n                return i * 55;\r\n            })\r\n            .attr(\"y\", 60)\r\n            .text(function(d, i) {\r\n                return d.s;\r\n            })\r\n            .style(\"font-size\", \"12px\");\r\n\r\n        g.append(\"text\")\r\n            .attr(\"class\", \"caption\")\r\n            .attr(\"y\", 12)\r\n            .text(szCaption);\r\n    } // generateLegend2()\r\n} // generateMap2\r\n","// $(document).ready(function() {\n//     app();\n//     app2();\n// });\n\n\nfunction app() {\n    queue()\n    //should be town polym data\n    .defer(d3.json, \"js/data/TOWN.geo.json\")\n    //.defer(d3.json, \"us_states_5m.geo.json\")\n    //should be opioid death data\n    .defer(d3.json, \"js/data/TOWN.geo.json\")\n    //.defer(d3.csv, \"us_pop.csv\")\n    .awaitAll(generateMap)\n}\n\nfunction generateMap(error, results) {\n    $('.controls-map').click(function() {\n        $(\"#timeline\").val($(this).data('select'));\n        setSymbology($(this).data('select'));\n    });\n\n    var maTowns = results[0];\n    var maOpioid = results[1];\n\n    var currentyear\n\n    var i;\n    for (i = 0; i < maTowns.features.length; i++) {\n        if (maTowns.features[i].properties.town != maOpioid.features[i].TOWN) {\n            // console.log('ASSERT failure for index: ' + i);\n            // console.log(maTowns.features[i].properties.town + ' mismatch with ' + maOpioid.features[i].TOWN);\n            alert('Input data corrupted: generation of map terminated.');\n            return;\n        }\n        maTowns.features[i].properties.OPIOIDSTATS = maOpioid.features[i].properties;\n    }\n\n    var width = 960,\n        height = 450;\n\n    var svgContainer = d3.select(\"#map\").append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .style(\"border\", \"0px solid steelblue\");\n\n    var tooltip = d3.select('#map').append('div')\n        .attr('class', 'hidden tooltip');\n\n    var opChgScale = d3.scale.threshold()\n        .domain([0.01, 6.9, 15.9, 31.5, Infinity])\n        .range(colorbrewer.Blues[5]);\n    opChgScale.domainStrings = function() {\n        return (['< 0.01', '0.01-6.9', '6.9-15.9',\n            '15.9-31.5', '>31.5'\n        ]);\n    };\n\n    function toTitleCase(str) {\n        return str.replace(/\\w\\S*/g, function(txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        });\n    }\n\n    var projection = d3.geo.conicConformal()\n        .parallels([41 + 43 / 60, 42 + 41 / 60])\n        .rotate([71 + 30 / 60, -41])\n        .scale([10000])\n        .translate([330, 480]);\n\n    var geoPath = d3.geo.path()\n        .projection(projection);\n\n    function notify(selector, eventName) {\n        d3.selectAll(selector)[0].forEach(function(el, i) {\n            var shape = d3.select(el);\n            shape.on(eventName)(shape);\n        });\n    }\n\n    var map = svgContainer.selectAll(\"path\")\n        .data(maTowns.features)\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", function(d, i) {\n            return geoPath(d);\n        })\n        .on('mousemove', function(d) {\n            var mouse = d3.mouse(svgContainer.node()).map(function(d) {\n                return parseInt(d);\n            });\n\n            var string_base = \"yr\"\n            currentvalue = string_base.concat(currentyear);\n\n            var currentrate\n\n            if (d.properties[currentvalue] > 0) {\n                currentrate = d3.format(\".1f\")(d.properties[currentvalue]);\n            } else if (d.properties[currentvalue] == 0) {\n                currentrate = d3.format(\".0f\")(d.properties[currentvalue]);\n            } else {\n                currentrate = \"N/A*\";\n            }\n\n            tooltip.classed('hidden', false)\n                .attr('style', 'left:' + (mouse[0] + 15) +\n                    'px !important; top:' + (mouse[1] + 100) + 'px !important')\n                .html(\"<b>\" + toTitleCase(d.properties.TOWN) + \"</b> | \" + currentrate);\n        })\n\n    .on('mouseover', function(d, i) {\n\n        var currentState = this;\n        d3.select(this).style('fill-opacity', 0.25)\n            .style(\"stroke\", \"white\")\n            .style(\"stroke-width\", \"2px\");\n    })\n        .on('mouseout', function(d, i) {\n            tooltip.classed('hidden', true);\n            d3.selectAll('path')\n                .style(\"fill-opacity\", 1)\n                .style(\"stroke\", \"#2f363d\")\n        \t\t.style(\"stroke-width\", \"0.1px\");\n        })\n        .style(\"stroke\", \"#2f363d\")\n        .style(\"stroke-width\", \"0.1px\")\n        .style(\"fill\", \"white\");\n\n   \n\n    var aYears = [\n        [2000, 2001],\n        [2001, 2002],\n        [2002, 2003],\n        [2003, 2004],\n        [2004, 2005],\n        [2005, 2006],\n        [2006, 2007],\n        [2007, 2008],\n        [2008, 2009],\n        [2010, 2011],\n        [2011, 2012],\n        [2012, 2013],\n        [2013, 2014],\n        [2014, 2014.5]\n    ];\n    var index = 0;\n    getYear();\n    generateLegend(opChgScale, 'legend', 'Unintentional Opioid Deaths per 100,000 people');\n\n    function getYear() {\n        setSymbology(2000);\n        $(\"#timeline\").on('input change', function() {\n            var year = $(this).val()\n            setSymbology($(this).val());\n        });\n    };\n\n\n    function setSymbology(year) {\n\n        var szAttr = 'yr' + year;\n        currentyear = year;\n        var toyear = eval(year) + 1;\n        $('#titlePrefix').html('Opiod Deaths in Massachusetts from');\n        $('#fromYear').html(year);\n        $('#titleMidfix').html('to');\n        $('#toYear').html(toyear);\n\n        svgContainer.selectAll(\"path\")\n            .transition()\n            .duration(500)\n            .style(\"fill\", function(d, i) {\n\n                var delta = +d.properties.OPIOIDSTATS[szAttr];\n                return (delta === -9999) ? '#f1f1f1' : opChgScale(delta);\n            });\n    }\n\n    function generateLegend(scale, szDivId, szCaption) {\n        var width = 550,\n            height = 80;\n\n        var svg = d3.select('#' + szDivId).append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n        var g = svg.append(\"g\");\n\n        // Create data array.\n        var legendData = [];\n        legendData.push({\n            d: -9999,\n            r: '#f1f1f1',\n            s: 'N/A'\n        });\n        var i;\n        for (i = 0; i < scale.domain().length; i++) {\n            legendData.push({\n                d: scale.domain()[i],\n                r: scale.range()[i],\n                s: scale.domainStrings()[i]\n            });\n        }\n\n        g.selectAll(\"rect\")\n            .data(legendData)\n            .enter().append(\"rect\")\n            .attr(\"height\", 20)\n            .attr(\"width\", 50)\n            .attr(\"x\", function(d, i) {\n                return i * 55;\n            })\n            .attr(\"y\", 20)\n            .style(\"stroke\", \"black\")\n            .style(\"stroke-width\", \"0.25px\")\n            .style(\"fill\", function(d, i) {\n                return d.r;\n            });\n\n        g.selectAll(\"text\")\n            .data(legendData)\n            .enter().append(\"text\")\n            .attr(\"x\", function(d, i) {\n                return i * 55;\n            })\n            .attr(\"y\", 60)\n            .text(function(d, i) {\n                return d.s;\n            })\n            .style(\"font-size\", \"12px\");\n\n        g.append(\"text\")\n            .attr(\"class\", \"caption\")\n            .attr(\"y\", 12)\n            .text(szCaption);\n    } // generateLegend()\n} // generateMap\n\n\n\n\n\n\n\n\n\n// ///////////////////Map Composite\n\n\n\n\n\n\n\n\n\n\nfunction app2() {\n    queue()\n    //should be town polym data\n    .defer(d3.json, \"js/data/TOWN.geo.json\")\n    //.defer(d3.json, \"us_states_5m.geo.json\")\n    //should be opioid death data\n    .defer(d3.json, \"js/data/TOWN.geo.json\")\n    //.defer(d3.csv, \"us_pop.csv\")\n    .awaitAll(generateMap2);\n}\n\nfunction generateMap2(error, results) {\n    $('.controls-map').click(function() {\n        $(\"#timeline\").val($(this).data('select'));\n        setSymbology2($(this).data('select'));\n    });\n\n    var maTowns = results[0];\n    var maOpioid = results[1];\n\n    var currentyear\n\n    var i;\n    for (i = 0; i < maTowns.features.length; i++) {\n        if (maTowns.features[i].properties.town != maOpioid.features[i].TOWN) {\n            // console.log('ASSERT failure for index: ' + i);\n            // console.log(maTowns.features[i].properties.town + ' mismatch with ' + maOpioid.features[i].TOWN);\n            alert('Input data corrupted: generation of map terminated.');\n            return;\n        }\n        maTowns.features[i].properties.OPIOIDSTATS = maOpioid.features[i].properties;\n    }\n\n    var width = 960,\n        height = 450;\n\n    var svgContainer = d3.select(\"#map2\").append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height)\n        .style(\"border\", \"0px solid steelblue\");\n\n    var tooltip2 = d3.select('#map2').append('div')\n        .attr('class', 'hidden tooltip2');\n\n    var opChgScale = d3.scale.threshold()\n        .domain([0.01, 6.9, 15.9, 31.5, Infinity])\n        .range(colorbrewer.RdPu[5]);\n    opChgScale.domainStrings = function() {\n        return (['< 0.01', '0.01-6.9', '6.9-15.9',\n            '15.9-31.5', '>31.5'\n        ]);\n    };\n\n    function toTitleCase(str) {\n        return str.replace(/\\w\\S*/g, function(txt) {\n            return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();\n        });\n    }\n\n    var projection = d3.geo.conicConformal()\n        .parallels([41 + 43 / 60, 42 + 41 / 60])\n        .rotate([71 + 30 / 60, -41])\n        .scale([10000])\n        .translate([330, 480]);\n\n    var geoPath = d3.geo.path()\n        .projection(projection);\n\n    var map = svgContainer.selectAll(\"path\")\n        .data(maTowns.features)\n        .enter()\n        .append(\"path\")\n        .attr(\"d\", function(d, i) {\n            return geoPath(d);\n        })\n        .on('mousemove', function(d) {\n            var mouse = d3.mouse(svgContainer.node()).map(function(d) {\n                return parseInt(d);\n            });\n            var string_base = \"yr\"\n            currentvalue = string_base.concat(currentyear);\n            var currentrate\n\n            if (d.properties[currentvalue] > 0) {\n                currentrate = d3.format(\".1f\")(d.properties[currentvalue]);\n            } else if (d.properties[currentvalue] == 0) {\n                currentrate = d3.format(\".0f\")(d.properties[currentvalue]);\n            } else {\n                currentrate = \"N/A*\";\n            }\n\n\n            tooltip2.classed('hidden', false)\n                .attr('style', 'left:' + (mouse[0] + 15) +\n                    'px !important; top:' + (mouse[1] + 625) + 'px !important')\n                .html(\"<b>\" + toTitleCase(d.properties.TOWN) + \"</b> | \" + currentrate);\n        })\n        .on('mouseover', function(d, i) {\n\n            var currentState = this;\n            d3.select(this).style('fill-opacity', 0.25)\n                .style(\"stroke\", \"white\")\n                .style(\"stroke-width\", \"2px\");\n        })\n        .on('mouseout', function(d, i) {\n            tooltip2.classed('hidden', true);\n            d3.selectAll('path')\n                .style(\"fill-opacity\", 1)\n                .style(\"stroke\", \"#2f363d\")\n                .style(\"stroke-width\", \"0.1px\");\n        })\n        .style(\"stroke\", \"#2f363d\")\n        .style(\"stroke-width\", \"0.1px\")\n        .style(\"fill\", \"white\")\n        .on('mouseenter', function(d, i) {\n\n            //var string_base = \"yr\"\n            //currentvalue = string_base.concat(currentyear);\n            //console.log(d.properties[currentvalue]);\n        })\n        .on('mouseleave', function(d) {\n\n        });\n\n    var aYears = [\n        [2000, 2001],\n        [2001, 2002],\n        [2002, 2003],\n        [2003, 2004],\n        [2004, 2005],\n        [2005, 2006],\n        [2006, 2007],\n        [2007, 2008],\n        [2008, 2009],\n        [2010, 2011],\n        [2011, 2012],\n        [2012, 2013],\n        [2013, 2014],\n        [2014, 2014.5]\n    ];\n\n    var index = 0;\n    getYear();\n\n    generateLegend2(opChgScale, 'legend2', 'Composite Index Values');\n\n    function getYear() {\n        setSymbology2(2000);\n        $(\"#timeline\").on('input change', function() {\n            var year = $(this).val()\n            setSymbology2($(this).val());\n        });\n    };\n\n\n    function setSymbology2(year) {\n\n        var szAttr = 'yr' + year;\n        currentyear = year\n        var toyear = eval(year) + 1\n\n        $('#titlePrefix2').html('Opioid Overdose Events in Massachusetts from');\n        $('#fromYear2').html(year);\n        $('#titleMidfix2').html('to');\n        $('#toYear2').html(toyear).append('<span>*</span>');\n        $('#map2-note').html('*Fatal and nonfatal overdoses, ambulance trips, emergency room admissions, narcan use, etc.');\n        $('#map2-source').html('Data Sources: U.S. Census Bureau;' +\n                            '<br />Executive Office of Health and Human Services'+\n                            '<br />(Registry of Vital Records and Statistics,' +\n                            '<br />Massachusetts Department of Public Health)');\n\n\n\n        svgContainer.selectAll(\"path\")\n            .transition()\n            .duration(500)\n            .style(\"fill\", function(d, i) {\n\n                var delta = +d.properties.OPIOIDSTATS[szAttr];\n                return (delta === -9999) ? '#f1f1f1' : opChgScale(delta);\n            });\n    }\n\n    function generateLegend2(scale, szDivId, szCaption) {\n        var width2 = 550,\n            height2 = 80;\n\n        var svg = d3.select('#' + szDivId).append(\"svg\")\n            .attr(\"width\", width2)\n            .attr(\"height\", height2);\n\n        var g = svg.append(\"g\");\n\n        // Create data array.\n        var legendData = [];\n        legendData.push({\n            d: -9999,\n            r: '#f1f1f1',\n            s: 'N/A'\n        });\n        var i;\n        for (i = 0; i < scale.domain().length; i++) {\n            legendData.push({\n                d: scale.domain()[i],\n                r: scale.range()[i],\n                s: scale.domainStrings()[i]\n            });\n        }\n\n        g.selectAll(\"rect\")\n            .data(legendData)\n            .enter().append(\"rect\")\n            .attr(\"height\", 20)\n            .attr(\"width\", 50)\n            .attr(\"x\", function(d, i) {\n                return i * 55;\n            })\n            .attr(\"y\", 20)\n            .style(\"stroke\", \"black\")\n            .style(\"stroke-width\", \"0.25px\")\n            .style(\"fill\", function(d, i) {\n                return d.r;\n            });\n\n        g.selectAll(\"text\")\n            .data(legendData)\n            .enter().append(\"text\")\n            .attr(\"x\", function(d, i) {\n                return i * 55;\n            })\n            .attr(\"y\", 60)\n            .text(function(d, i) {\n                return d.s;\n            })\n            .style(\"font-size\", \"12px\");\n\n        g.append(\"text\")\n            .attr(\"class\", \"caption\")\n            .attr(\"y\", 12)\n            .text(szCaption);\n    } // generateLegend2()\n} // generateMap2","angular.module('fentViz', []).\ndirective('d3LocationTrendChart', function($parse) {\n    return {\n        restrict: 'AE',\n        scope: {\n            groupChartData: '='\n        },\n        link: function(scope, element, attrs) {\n            scope.$watch('groupChartData', function(newVal, oldVal) {\n                var canvasId = scope.canvasId;\n                var chartTitle = scope.chartTitle;\n                var chartData = scope.groupChartData;\n                var chartDataCount = chartData.length - 1;\n\n                var monthformat = d3.time.format(\"%B\");\n                var yearformat = d3.time.format(\"%Y\");\n\n                var quarter = function(date, i) {\n                    var i = 0\n                    if (i >= 0) {\n                        var date2 = new Date();\n                        date2.setMonth(date.getMonth() - 10);\n                        q = Math.ceil((date2.getMonth()) / 3);\n                        return \"Q\" + q;\n                    }\n                }\n\n                var seriesColors = [\"#b71c1c\", \"#0071bc\", \"#ffffff\", \"#ffffff\"];\n                var seriesLineStrokes = [\"3.5px\", \"3.5px\", \"1.5px\", \"1.5px\"];\n                var seriesLineDash = [\"0,0,0,0\", \"0,0,0,0\", \"2,2,2,2\", \"1,1,1,1\"]\n                var seriesPointShapes = [\"circle\", \"circle\", \"circle\", \"circle\"];\n                var seriesPointWidth = [\"1.5px\", \"1px\", \"1px\", \"1px\"];\n                var seriesPointFill = [\"#a50f15\", \"#08519c\", \"#636363\", \"#636363\"];\n                var xLabel = \"date\";\n\n                var margin = {\n                    top: 30,\n                    right: 200,\n                    bottom: 50,\n                    left: 30\n                };\n\n                var width = 500;\n                var height = 300;\n\n                var canvasWidth = d3.select(element[0]).attr(\"width\");\n                var canvasHeight = d3.select(element[0]).attr(\"height\");\n                var width = canvasWidth - margin.left - margin.right;\n                var height = canvasHeight - margin.top - margin.bottom;\n                var yearformat = d3.time.format(\"%Y\");\n\n                var parseDate = d3.time.format(\"%Y%m%d\").parse;\n\n                var bisectDate = d3.bisector(function(d) {\n                    return d.date;\n                }).left;\n\n                var end = parseDate(\"20160101\");\n\n                var x = d3.scale.ordinal().rangePoints([0, width]);\n                var x2 = d3.scale.ordinal().rangePoints([0, width]);\n\n                //var x = d3.time.scale()\n                //         .domain([chartData[0].date, chartData[chartDataCount].date])\n                //    .range([0, 91]);\n\n                //var x2 = d3.time.scale()\n                //         .domain([chartData[0].date, chartData[chartDataCount].date])\n                //    .range([0, 91]);\n\n                var y = d3.scale.linear()\n                    .range([height, 0]);\n\n                var color = d3.scale.ordinal()\n                    .range(seriesColors);\n\n                var lineStroke = d3.scale.ordinal()\n                    .range(seriesLineStrokes);\n\n                var lineDash = d3.scale.ordinal()\n                    .range(seriesLineDash);\n\n                var pointShape = d3.scale.ordinal()\n                    .range(seriesPointShapes);\n\n                var pointWidth = d3.scale.ordinal()\n                    .range(seriesPointWidth);\n\n                var pointFill = d3.scale.ordinal()\n                    .range(seriesPointFill);\n\n                var xAxis_fent = d3.svg.axis()\n                    .scale(x)\n                    .orient(\"bottom\")\n                    .ticks(d3.time.months, 3)\n                    //.tickSize(5, 0)\n                    .tickFormat(quarter);\n\n\n                var xAxis2_fent = d3.svg.axis()\n                    .scale(x)\n                    .ticks(d3.time.years, 1)\n                    .tickFormat(yearformat)\n                    .tickSize(5, 0)\n                    .orient(\"bottom\");\n\n                var yAxis_fent = d3.svg.axis()\n                    .scale(y)\n                    .orient(\"left\")\n                    .ticks(4)\n                    .tickSize(5, 0)\n                    .tickPadding(3);\n\n                //create tooltipFent\n\n                // add a tooltipFent to the page - not to the svg itself!\n                var tooltipFent = d3.select(\"body\")\n                    .append(\"div\")\n                    .attr(\"class\", \"tooltipFent\");\n\n                var line = d3.svg.line()\n                    //.interpolate(\"monotone\")\n                    .x(function(d) {\n                        return x(d.label);\n                    })\n                    .y(function(d) {\n                        return y(d.value);\n                    });\n\n\n                var $lines_fent = d3.select(element[0]).append(\"svg\")\n                    .attr(\"width\", width + margin.left + margin.right)\n                    .attr(\"height\", height + margin.top + margin.bottom)\n                    .append(\"g\")\n                    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n                /*  var benchMark = svg.append(\"rect\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", 0)\n                    .attr(\"width\", width)\n                    .attr(\"fill\", \"#C2EBC9\")\n                    .attr(\"height\", 120);\n\n                var threshold = svg.append(\"rect\")\n                    .attr(\"x\", 0)\n                    .attr(\"y\", 120)\n                    .attr(\"width\", width)\n                    .attr(\"fill\", \"#FFE97F\")\n                    .attr(\"height\", 50);\n*/\n                var varSeries = d3.keys(chartData[0]).filter(function(key) {\n                    return key !== xLabel;\n                });\n\n                color.domain(varSeries);\n                lineStroke.domain(varSeries);\n                lineDash.domain(varSeries);\n                pointShape.domain(varSeries);\n                pointWidth.domain(varSeries);\n                pointFill.domain(varSeries);\n\n                var seriesData = varSeries.map(function(name) {\n                    return {\n                        name: name,\n                        values: chartData.map(function(d) {\n                            return {\n                                name: name,\n                                label: d[xLabel],\n                                value: +d[name]\n                            };\n                        })\n                    };\n                });\n\n\n                x.domain(chartData.map(function(d) {\n                    return d.date;\n                }));\n\n                x2.domain(chartData.map(function(d) {\n                    return d.date;\n                }));\n\n                y.domain([\n                    d3.min(seriesData, function(c) {\n                        return d3.min(c.values, function(d) {\n                            return d.value - 4;\n                        });\n                    }),\n                    d3.max(seriesData, function(c) {\n                        return d3.max(c.values, function(d) {\n                            return d.value + 2;\n                        });\n                    })\n                ]);\n\n                $lines_fent.append(\"g\")\n                    .attr(\"class\", \"x axis_fent\")\n                    .attr(\"transform\", \"translate(0,\" + height + \")\")\n                    .call(xAxis_fent)\n                    .append(\"path\")\n                    .attr(\"class\", \"line\")\n                    .style(\"stroke-width\", \"1.5px\")\n                    .call(xAxis_fent);\n\n                $lines_fent.append(\"g\")\n                    .attr(\"class\", \"x axis2_fent\")\n                    .attr(\"transform\", \"translate(0,\" + (height + 15) + \")\")\n                    .call(xAxis2_fent);\n\n                //         svg.append(\"g\")\n                // .attr(\"class\", \"x axis\").append(\"path\")\n                //          .attr(\"class\",\"line\") \n\n                $lines_fent.append(\"g\")\n                    .attr(\"class\", \"y axis_fent\")\n                    .call(yAxis_fent);\n\n                var series = $lines_fent.selectAll(\".series\")\n                    .data(seriesData)\n                    .enter().append(\"g\")\n                    .attr(\"class\", \"seriesData\");\n\n                //console.log(series);  \n\n                series.append(\"path\")\n                    .attr(\"class\", \"line\")\n                    .attr(\"d\", function(d) {\n                        return line(d.values);\n                    })\n                    .style(\"stroke\", function(d) {\n                        return color(d.name);\n                    })\n                    .style(\"stroke-width\", function(d) {\n                        return lineStroke(d.name);\n                    })\n                    .style(\"stroke-dasharray\", function(d) {\n                        return lineDash(d.name);\n                    })\n                    .style(\"fill\", \"none\");\n\n\n\n                $lines_fent.append(\"text\")\n                    .attr(\"class\", \"aside-note\")\n                    .attr(\"x\", width + 10)\n                    .attr(\"y\", y(chartData[8].Cocaine) - 7)\n                    .attr(\"dy\", \"1em\")\n                    .style(\"text-anchor\", \"start\")\n                    .text(\"Cocaine\")\n                    .style(\"fill\", \"$color-white\")\n                    .style(\"font-weight\", \"normal\");\n\n                $lines_fent.append(\"text\")\n                    .attr(\"class\", \"aside-note\")\n                    .attr(\"x\", width + 10)\n                    .attr(\"y\", y(chartData[8].Benzodiazepine) - 7)\n                    .attr(\"dy\", \"1em\")\n                    .style(\"text-anchor\", \"start\")\n                    .text(\"Benzodiazepine\")\n                    .style(\"fill\", \"$color-white\")\n                    .style(\"font-weight\", \"normal\");\n\n                $lines_fent.append(\"text\")\n                    .attr(\"class\", \"aside-note\")\n                    .attr(\"x\", width + 10)\n                    .attr(\"y\", y(chartData[8].Heroin) - 7)\n                    .attr(\"dy\", \"1em\")\n                    .style(\"text-anchor\", \"start\")\n                    .text(\"Heroin\")\n                    //.style(\"fill\", \"#08519c\")\n                    .style(\"fill\", \"#fff\")\n                    .style(\"font-size\", \"15px\")\n                   // .style(\"font-weight\", \"bold\");\n\n                $lines_fent.append(\"text\")\n                    .attr(\"class\", \"aside-note\")\n                    .attr(\"x\", width + 10)\n                    .attr(\"y\", y(chartData[8].Fentanyl) - 7)\n                    .attr(\"dy\", \"1em\")\n                    .style(\"text-anchor\", \"start\")\n                    .text(\"Fentanyl\")\n                    .style(\"font-size\", \"15px\")\n                    //.style(\"fill\", \"#f44336\")\n                    .style(\"fill\", \"#fff\")\n                   // .style(\"font-weight\", \"bold\");\n\n\n\n                //add point to line\n                // series.selectAll(\".point\")\n                //     .data(function(d) {\n                //         return d.values;\n                //         console.log(d.values);\n                //     })\n                //     .enter().append(\"path\")\n                //     .attr(\"transform\", function(d) {\n                //         return \"translate(\" + x(d.label) + \",\" + y(d.value) + \")\";\n                //     })\n                //     .attr(\"d\", d3.svg.symbol().type(\"circle\").size(15))\n                //  .attr(\"class\", \"point\")\n                //     .style(\"fill\", function(d) {\n                //         return pointFill(d.name);\n                //     })\n                //     .style(\"stroke\", function(d) {\n                //         return color(d.name);\n                //     })\n                //     .style(\"stroke-width\", function(d) {\n                //         return lineStroke(d.name);\n                //     });\n\n                /*======================================================================\n                 Mouse Functions\n                ======================================================================*/\n                var focus = $lines_fent.append(\"g\")\n                    .attr(\"class\", \"focus\")\n                    .style(\"display\", \"none\");\n\n                focus.append(\"circle\")\n                    .attr(\"r\", 6)\n                    .style(\"stroke-width\", 1);\n                //.transition()\n                //.duration(500)\n                //.attr(\"r\", 50)\n                //.transition(500)\n                //.attr(\"r\",500);\n\n                d3.selectAll(\"g.seriesData\")\n                    .on(\"mouseover\", mouseoverFunc)\n                    .on(\"mouseout\", mouseoutFunc)\n                    .on(\"mousemove\", mousemoveFunc);\n\n                function mouseoutFunc() {\n\n                    d3.selectAll(\"path.line\").classed(\"unfocused\", false).classed(\"focused\", false);\n                    d3.selectAll(\"path.point\").classed(\"unfocused\", false).classed(\"focused\", false).attr(\"d\", d3.svg.symbol().type(\"circle\").size(15)).style(\"fill-opacity\", \"1\");\n                    tooltipFent.style(\"display\", \"none\"); // this sets it to invisible!\n                    focus.style(\"display\", \"none\");\n                }\n\n                function mouseoverFunc(d, i) {\n\n                    d3.selectAll(\"path.line\").classed(\"unfocused\", true);\n                    d3.selectAll(\"path.point\").classed(\"unfocused\", true).attr(\"d\", d3.svg.symbol().type(\"circle\").size(10)).style(\"fill-opacity\", \"0\");\n                    // below code sets the sub set of data even more - they only go \"unfocused\" if a certain line is selected. Otherwise, they remain at the regular opacity. .\n                    //         if(!d3.select(this).select(\"path.line\").classed(\"ssAfrica\")) {\n                    //             d3.selectAll(\"path.ssAfrica\").classed(\"unfocused\", false);\n                    //         }\n\n                    d3.select(this).select(\"path.line\").classed(\"unfocused\", false).classed(\"focused\", true);\n                    //d3.select(this).select(\"path.point\").classed(\"unfocused\", false).classed(\"focused\", true).attr(\"d\", d3.svg.symbol().type(\"circle\").size(0));\n                    var x0 = d3.mouse(this)[0];\n                    var y0 = d3.mouse(this)[1]\n                    var y1 = Math.round((y.invert(y0) * 10) / 10);\n                    var percentVal = d3.format(\".0%\")(y1 / 100)\n                        //console.log(y1)\n                    tooltipFent\n                        .style(\"display\", null) // this removes the display none setting from it\n                        .html(\n                            \"<p><span class='tooltipFentHeader sans'>\" + percentVal + \"</span></p>\"\n                        );\n                    //console.log(d.rates[i]);\n                    //console.log(d3.select(this).select(\"path.point\"));\n                    focus.style(\"display\", null);\n                }\n\n                function mousemoveFunc(d) {\n\n\n\n                    //console.log(\"events\", window.event, d3.event);\n                    var x0 = d3.mouse(this)[0];\n                    var y0 = d3.mouse(this)[1]\n                    var y1 = Math.round((y.invert(y0) * 10) / 10);\n                    var percentVal = d3.format(\".0%\")(y1 / 100);\n\n                    focus.attr(\"transform\", \"translate(\" + x0 + \",\" + y0 + \")\");\n\n\n\n                    tooltipFent\n                        .style(\"top\", (d3.event.pageY - 45) + \"px\")\n                        .style(\"left\", (d3.event.pageX + 5) + \"px\")\n                        .html(\n                            \"<p><span class='tooltipFentHeader sans'>\" + percentVal + \"</span></p>\"\n                        );\n                }\n            });\n        }\n    }\n});\n\n\n\nfunction Ctrl($scope) {\n    //var date = new Date(2014, 7, 1);\n    var date = new Date(\"01/01/2014\");\n    //var date2 = new Date(2014, 10, 1);\n    var date2 = new Date(\"04/01/2014\");\n    //var date3 = new Date(2015, 1, 1);\n    var date3 = new Date(\"07/01/2014\");\n    //var date4 = new Date(2015, 4, 1);\n    var date4 = new Date(\"10/01/2014\");\n    //var date5 = new Date\n    var date5 = new Date(\"01/01/2015\");\n    //var date6 = new Date(2014, 10, 1);\n    var date6 = new Date(\"04/01/2015\");\n    //var date7 = new Date(2015, 1, 1);\n    var date7 = new Date(\"07/01/2015\");\n    //var date8 = new Date(2015, 4, 1);\n    var date8 = new Date(\"10/01/2015\");\n    //var date = new Date(2014, 7, 1);\n    var date9 = new Date(\"01/01/2016\");\n\n    //alert(date);\n    var chartData = [{\n        \"date\": date,\n        \"Fentanyl\": \"42\",\n        \"Heroin\": \"59\",\n        \"Benzodiazepine\": \"62\",\n        \"Cocaine\": \"30\"\n    }, {\n        \"date\": date2,\n        \"Fentanyl\": \"38\",\n        \"Heroin\": \"69\",\n        \"Benzodiazepine\": \"60\",\n        \"Cocaine\": \"40\"\n    }, {\n        \"date\": date3,\n        \"Fentanyl\": \"30\",\n        \"Heroin\": \"68\",\n        \"Benzodiazepine\": \"58\",\n        \"Cocaine\": \"28\"\n    }, {\n        \"date\": date4,\n        \"Fentanyl\": \"55\",\n        \"Heroin\": \"58\",\n        \"Benzodiazepine\": \"50\",\n        \"Cocaine\": \"24\"\n    }, {\n        \"date\": date5,\n        \"Fentanyl\": \"61\",\n        \"Heroin\": \"53\",\n        \"Benzodiazepine\": \"51\",\n        \"Cocaine\": \"27\"\n    }, {\n        \"date\": date6,\n        \"Fentanyl\": \"63\",\n        \"Heroin\": \"56\",\n        \"Benzodiazepine\": \"55\",\n        \"Cocaine\": \"28\"\n    }, {\n        \"date\": date7,\n        \"Fentanyl\": \"58\",\n        \"Heroin\": \"50\",\n        \"Benzodiazepine\": \"53\",\n        \"Cocaine\": \"38\"\n    }, {\n        \"date\": date8,\n        \"Fentanyl\": \"65\",\n        \"Heroin\": \"48\",\n        \"Benzodiazepine\": \"52\",\n        \"Cocaine\": \"28\"\n    }, {\n        \"date\": date9,\n        \"Fentanyl\": \"67\",\n        \"Heroin\": \"42\",\n        \"Benzodiazepine\": \"51\",\n        \"Cocaine\": \"28\"\n    }];\n\n    $scope.myData = chartData;\n}\n"," var town_names = [\n     //\"massachusetts\",\n     \"abington\",\n     \"acton\",\n     \"acushnet\",\n     \"adams\",\n     \"agawam\",\n     \"alford\",\n     \"amesbury\",\n     \"amherst\",\n     \"andover\",\n     \"aquinnah\",\n     \"arlington\",\n     \"ashburnham\",\n     \"ashby\",\n     \"ashfield\",\n     \"ashland\",\n     \"athol\",\n     \"attleboro\",\n     \"auburn\",\n     \"avon\",\n     \"ayer\",\n     \"barnstable\",\n     \"barre\",\n     \"becket\",\n     \"bedford\",\n     \"belchertown\",\n     \"bellingham\",\n     \"belmont\",\n     \"berkley\",\n     \"berlin\",\n     \"bernardston\",\n     \"beverly\",\n     \"billerica\",\n     \"blackstone\",\n     \"blandford\",\n     \"bolton\",\n     \"boston\",\n     \"bourne\",\n     \"boxborough\",\n     \"boxford\",\n     \"boylston\",\n     \"braintree\",\n     \"brewster\",\n     \"bridgewater\",\n     \"brimfield\",\n     \"brockton\",\n     \"brookfield\",\n     \"brewster\",\n     \"bridgewater\",\n     \"brimfield\",\n     \"brockton\",\n     \"brookfield\",\n     \"brookline\",\n     \"buckland\",\n     \"burlington\",\n     \"cambridge\",\n     \"canton\",\n     \"carlisle\",\n     \"carver\",\n     \"charlemont\",\n     \"charlton\",\n     \"chatham\",\n     \"chelmsford\",\n     \"chelsea\",\n     \"cheshire\",\n     \"chester\",\n     \"chesterfield\",\n     \"chicopee\",\n     \"chilmark\",\n     \"clarksburg\",\n     \"clinton\",\n     \"cohasset\",\n     \"colrain\",\n     \"concord\",\n     \"conway\",\n     \"cummington\",\n     \"dalton\",\n     \"danvers\",\n     \"dartmouth\",\n     \"dedham\",\n     \"deerfield\",\n     \"dennis\",\n     \"dighton\",\n     \"douglas\",\n     \"dover\",\n     \"dracut\",\n     \"dudley\",\n     \"dunstable\",\n     \"duxbury\",\n     \"eastbridgewater\",\n     \"eastbrookfield\",\n     \"eastlongmeadow\",\n     \"eastham\",\n     \"easthampton\",\n     \"easton\",\n     \"edgartown\",\n     \"egremont\",\n     \"erving\",\n     \"essex\",\n     \"everett\",\n     \"fairhaven\",\n     \"fallriver\",\n     \"falmouth\",\n     \"fitchburg\",\n     \"florida\",\n     \"foxborough\",\n     \"framingham\",\n     \"franklin\",\n     \"freetown\",\n     \"gardner\",\n     \"gay head\",\n     \"georgetown\",\n     \"gill\",\n     \"gloucester\",\n     \"goshen\",\n     \"gosnold\",\n     \"grafton\",\n     \"granby\",\n     \"granville\",\n     \"greatbarrington\",\n     \"greenfield\",\n     \"groton\",\n     \"groveland\",\n     \"hadley\",\n     \"halifax\",\n     \"hamilton\",\n     \"hampden\",\n     \"hancock\",\n     \"hanover\",\n     \"hanson\",\n     \"hardwick\",\n     \"harvard\",\n     \"harwich\",\n     \"hatfield\",\n     \"haverhill\",\n     \"hawley\",\n     \"heath\",\n     \"hingham\",\n     \"hinsdale\",\n     \"holbrook\",\n     \"holden\",\n     \"holland\",\n     \"holliston\",\n     \"holyoke\",\n     \"hopedale\",\n     \"hopkinton\",\n     \"hubbardston\",\n     \"hudson\",\n     \"hull\",\n     \"huntington\",\n     \"ipswich\",\n     \"kingston\",\n     \"lakeville\",\n     \"lancaster\",\n     \"lanesborough\",\n     \"lawrence\",\n     \"lee\",\n     \"leicester\",\n     \"lenox\",\n     \"leominster\",\n     \"leverett\",\n     \"lexington\",\n     \"leyden\",\n     \"lincoln\",\n     \"littleton\",\n     \"longmeadow\",\n     \"lowell\",\n     \"ludlow\",\n     \"lunenburg\",\n     \"lynn\",\n     \"lynnfield\",\n     \"malden\",\n     \"manchester\",\n     \"mansfield\",\n     \"marblehead\",\n     \"marion\",\n     \"marlborough\",\n     \"marshfield\",\n     \"mashpee\",\n     \"mattapoisett\",\n     \"maynard\",\n     \"medfield\",\n     \"medford\",\n     \"medway\",\n     \"melrose\",\n     \"mendon\",\n     \"merrimac\",\n     \"methuen\",\n     \"middleborough\",\n     \"middlefield\",\n     \"middleton\",\n     \"milford\",\n     \"millbury\",\n     \"millis\",\n     \"millville\",\n     \"milton\",\n     \"monroe\",\n     \"monson\",\n     \"montague\",\n     \"monterey\",\n     \"montgomery\",\n     \"mountwashington\",\n     \"nahant\",\n     \"nantucket\",\n     \"natick\",\n     \"needham\",\n     \"newashford\",\n     \"newbedford\",\n     \"newbraintree\",\n     \"newmarlborough\",\n     \"newsalem\",\n     \"newbury\",\n     \"newburyport\",\n     \"newton\",\n     \"norfolk\",\n     \"westadams\",\n     \"westandover\",\n     \"westattleborough\",\n     \"westbrookfield\",\n     \"westreading\",\n     \"northampton\",\n     \"northborough\",\n     \"northbridge\",\n     \"northfield\",\n     \"norton\",\n     \"norwell\",\n     \"norwood\",\n     \"oak bluffs\",\n     \"oakham\",\n     \"orange\",\n     \"orleans\",\n     \"otis\",\n     \"oxford\",\n     \"palmer\",\n     \"paxton\",\n     \"peabody\",\n     \"pelham\",\n     \"pembroke\",\n     \"pepperell\",\n     \"peru\",\n     \"petersham\",\n     \"phillipston\",\n     \"pittsfield\",\n     \"plainfield\",\n     \"plainville\",\n     \"plymouth\",\n     \"plympton\",\n     \"princeton\",\n     \"provincetown\",\n     \"quincy\",\n     \"randolph\",\n     \"raynham\",\n     \"reading\",\n     \"rehoboth\",\n     \"revere\",\n     \"richmond\",\n     \"rochester\",\n     \"rockland\",\n     \"rockport\",\n     \"rowe\",\n     \"rowley\",\n     \"royalston\",\n     \"russell\",\n     \"rutland\",\n     \"salem\",\n     \"salisbury\",\n     \"sandisfield\",\n     \"sandwich\",\n     \"saugus\",\n     \"savoy\",\n     \"scituate\",\n     \"seekonk\",\n     \"sharon\",\n     \"sheffield\",\n     \"shelburne\",\n     \"sherborn\",\n     \"shirley\",\n     \"shrewsbury\",\n     \"shutesbury\",\n     \"somerset\",\n     \"somerville\",\n     \"southhadley\",\n     \"southampton\",\n     \"southborough\",\n     \"southbridge\",\n     \"southwick\",\n     \"spencer\",\n     \"springfield\",\n     \"sterling\",\n     \"stockbridge\",\n     \"stoneham\",\n     \"stoughton\",\n     \"stow\",\n     \"sturbridge\",\n     \"sudbury\",\n     \"sunderland\",\n     \"sutton\",\n     \"swampscott\",\n     \"swansea\",\n     \"taunton\",\n     \"templeton\",\n     \"tewksbury\",\n     \"tisbury\",\n     \"tolland\",\n     \"topsfield\",\n     \"townsend\",\n     \"truro\",\n     \"tyngsborough\",\n     \"tyringham\",\n     \"upton\",\n     \"uxbridge\",\n     \"wakefield\",\n     \"wales\",\n     \"walpole\",\n     \"waltham\",\n     \"ware\",\n     \"wareham\",\n     \"warren\",\n     \"warwick\",\n     \"washington\",\n     \"watertown\",\n     \"wayland\",\n     \"webster\",\n     \"wellesley\",\n     \"wellfleet\",\n     \"wendell\",\n     \"wenham\",\n     \"westboylston\",\n     \"westbridgewater\",\n     \"westbrookfield\",\n     \"westnewbury\",\n     \"westspringfield\",\n     \"weststockbridge\",\n     \"westtisbury\",\n     \"westborough\",\n     \"westfield\",\n     \"westford\",\n     \"westhampton\",\n     \"westminster\",\n     \"weston\",\n     \"westport\",\n     \"westwood\",\n     \"weymouth\",\n     \"whately\",\n     \"whitman\",\n     \"wilbraham\",\n     \"williamsburg\",\n     \"williamstown\",\n     \"wilmington\",\n     \"winchendon\",\n     \"winchester\",\n     \"windsor\",\n     \"winthrop\",\n     \"woburn\",\n     \"worcester\",\n     \"worthington\",\n     \"wrentham\",\n     \"yarmouth\"\n ];\n var current_town = \"massachusetts\";\n\n var margin_bsas = {\n         top: 0,\n         right: 50,\n         bottom: 30,\n         left: 50\n     },\n     width_bsas = 650 - margin_bsas.left - margin_bsas.right,\n     height_bsas = 400 - margin_bsas.top - margin_bsas.bottom;\n\n var bisectAge = d3.bisector(function(d) {\n     return d.age;\n }).left;\n var percent = d3.format(',.1%');\n var yearformat = d3.format(\"d\");\n // var min_age = 2005;\n // var fields = ['emp', 'edu', 'race', 'orig'];\n var groups = {};\n\n var x = d3.scale.linear()\n     .range([0, width_bsas]);\n\n var y = d3.scale.linear()\n     .range([height_bsas, 0]);\n // .domain([0, 6]);\n\n var color = d3.scale.category10();\n\n var xAxis_bsas = d3.svg.axis()\n     .scale(x)\n     .tickFormat(yearformat)\n     .orient(\"bottom\")\n     .outerTickSize(0);\n\n var yAxis_bsas = d3.svg.axis()\n     .scale(y)\n     .tickSize(width_bsas)\n     .orient(\"right\")\n     .tickFormat(percent);\n\n var line = d3.svg.line()\n     .x(function(d) {\n         return x(d.age);\n     })\n     .y(function(d) {\n         return y(d.value);\n     })\n     .defined(function(d) {\n         return y(d.value);\n     }) // Omit empty values.;\n\n\n\n var $lines_bsas = d3.select(\"#lines-bsas\").append(\"svg\")\n     .attr(\"width\", width_bsas + margin_bsas.left + margin_bsas.right)\n     .attr(\"height\", height_bsas + margin_bsas.top + margin_bsas.bottom)\n     .append(\"g\")\n     .attr(\"transform\", \"translate(\" + margin_bsas.left + \",\" + margin_bsas.top + \")\");\n\n d3.csv(\"js/data/bsas-data.csv\", type, function(error, data) {\n     if (error) throw error;\n     //console.log(groups);\n     // var marriages = groups[current_town];\n\n     x.domain([2005, d3.max(data, function(d) {\n         return d.age;\n     })]);\n     y.domain([0, .99]);\n\n     $lines_bsas.append(\"g\")\n         .attr(\"class\", \"x axis_bsas\")\n         .attr(\"transform\", \"translate(0,\" + height_bsas + \")\")\n         .call(xAxis_bsas)\n         .append(\"text\")\n         .attr(\"x\", 635)\n         .attr(\"y\", 15)\n         .attr(\"text-anchor\", \"middle\")\n         .text(\"Year\");\n\n     $lines_bsas.append(\"g\")\n         .attr(\"class\", \"y axis_bsas\")\n         .call(yAxis_bsas)\n         .append(\"text\")\n         // .attr(\"y\", -30)\n         .style(\"text-anchor\", \"start\")\n         // .text(\"Substance Abuse\");\n     $lines_bsas.selectAll(\".y.axis_bsas text\").attr(\"x\", -43).attr(\"dy\", 0);\n\n     var legend_pos_text = -40,\n         legend_pos_dot = -50;\n\n\n     $lines_bsas.append(\"circle\")\n         .attr(\"class\", \"circle opioids\")\n         .attr(\"cx\", width_bsas + legend_pos_dot)\n         .attr(\"cy\", 25)\n         .attr(\"r\", 3);\n     $lines_bsas.append(\"g\")\n         .append(\"text\")\n         .attr(\"class\", \"focus opioids\")\n         .attr(\"x\", width_bsas + legend_pos_text)\n         .attr(\"y\", 28)\n         .text(\"opioids\");\n\n     $lines_bsas.append(\"circle\")\n         .attr(\"class\", \"circle alcohol\")\n         .attr(\"cx\", width_bsas + legend_pos_dot)\n         .attr(\"cy\", 40)\n         .attr(\"r\", 3);\n     $lines_bsas.append(\"g\")\n         .append(\"text\")\n         .attr(\"class\", \"focus alcohol\")\n         .attr(\"x\", width_bsas + legend_pos_text)\n         .attr(\"y\", 43)\n         .text(\"alcohol\");\n\n\n     $lines_bsas.append(\"circle\")\n         .attr(\"class\", \"circle marijuana\")\n         .attr(\"cx\", width_bsas + legend_pos_dot)\n         .attr(\"cy\", 55)\n         .attr(\"r\", 3);\n     $lines_bsas.append(\"g\")\n         .append(\"text\")\n         .attr(\"class\", \"focus marijuana\")\n         .attr(\"x\", width_bsas + legend_pos_text)\n         .attr(\"y\", 58)\n         .text(\"marijuana\");\n\n\n     $lines_bsas.append(\"circle\")\n         .attr(\"class\", \"circle other\")\n         .attr(\"cx\", width_bsas + legend_pos_dot)\n         .attr(\"cy\", 70)\n         .attr(\"r\", 3);\n     $lines_bsas.append(\"g\")\n         .append(\"text\")\n         .attr(\"class\", \"focus other\")\n         .attr(\"x\", width_bsas + legend_pos_text)\n         .attr(\"y\", 73)\n         .text(\"other\");\n\n\n     $lines_bsas.append(\"circle\")\n         .attr(\"class\", \"circle none\")\n         .attr(\"cx\", width_bsas + legend_pos_dot)\n         .attr(\"cy\", 82)\n         .attr(\"r\", 3);\n     $lines_bsas.append(\"g\")\n         .append(\"text\")\n         .attr(\"class\", \"focus none\")\n         .attr(\"x\", width_bsas + legend_pos_text)\n         .attr(\"y\", 88)\n         .text(\"none\");\n\n     // Alcohol line\n     $lines_bsas.append(\"path\")\n         .attr(\"class\", \"line alcohol\")\n         .attr(\"d\", function(d) {\n             return line(groups[current_town + \"alcohol\"].values);\n         });\n\n     //alcohol circle\n     for (i = 0; i < groups[current_town + \"alcohol\"].values.length; i++) {\n\n         var x_circle_alcohol = groups[current_town + \"alcohol\"].values[i].age;\n         var y_circle_alcohol = groups[current_town + \"alcohol\"].values[i].value;\n\n         if (y_circle_alcohol >= 0) {\n\n             //console.log(groups[current_town+\"alcohol\"].values[i].age); \n             //console.log(\"circle alcohol y\" + groups[current_town + \"alcohol\"].values[i].age)\n\n             $lines_bsas.append(\"circle\")\n                 .attr(\"class\", function(d) {\n                     return \"circle alcohol y\" + groups[current_town + \"alcohol\"].values[i].age\n                 })\n                 .attr(\"cx\", x(groups[current_town + \"alcohol\"].values[i].age))\n                 .attr(\"cy\", y(groups[current_town + \"alcohol\"].values[i].value))\n                 .attr(\"r\", 3)\n         }\n     }\n\n     // Marijuana line\n     $lines_bsas.append(\"path\")\n         .attr(\"class\", \"line marijuana\")\n         .attr(\"d\", function(d) {\n             return line(groups[current_town + \"marijuana\"].values);\n         });\n     // Marijuana circle\n     for (i = 0; i < groups[current_town + \"marijuana\"].values.length; i++) {\n\n         var x_circle_alcohol = groups[current_town + \"marijuana\"].values[i].age;\n         var y_circle_alcohol = groups[current_town + \"marijuana\"].values[i].value;\n\n         if (y_circle_alcohol >= 0) {\n\n             //console.log(groups[current_town+\"alcohol\"].values[i].age); \n             //console.log(\"circle marijuana y\" + groups[current_town + \"marijuana\"].values[i].age)\n\n             $lines_bsas.append(\"circle\")\n                 .attr(\"class\", function(d) {\n                     return \"circle marijuana y\" + groups[current_town + \"marijuana\"].values[i].age\n                 })\n                 .attr(\"cx\", x(groups[current_town + \"marijuana\"].values[i].age))\n                 .attr(\"cy\", y(groups[current_town + \"marijuana\"].values[i].value))\n                 .attr(\"r\", 3)\n         }\n     }\n\n     // None line\n     $lines_bsas.append(\"path\")\n         .attr(\"class\", \"line none\")\n         .attr(\"d\", function(d) {\n             return line(groups[current_town + \"none\"].values);\n         });\n     // None circle\n     for (i = 0; i < groups[current_town + \"none\"].values.length; i++) {\n\n         var x_circle_alcohol = groups[current_town + \"none\"].values[i].age;\n         var y_circle_alcohol = groups[current_town + \"none\"].values[i].value;\n\n         if (y_circle_alcohol >= 0) {\n\n             //console.log(groups[current_town+\"alcohol\"].values[i].age); \n             //console.log(\"circle none y\" + groups[current_town + \"none\"].values[i].age)\n\n             $lines_bsas.append(\"circle\")\n                 .attr(\"class\", function(d) {\n                     return \"circle none y\" + groups[current_town + \"none\"].values[i].age\n                 })\n                 .attr(\"cx\", x(groups[current_town + \"none\"].values[i].age))\n                 .attr(\"cy\", y(groups[current_town + \"none\"].values[i].value))\n                 .attr(\"r\", 3)\n         }\n     }\n\n     // Opioids line\n     $lines_bsas.append(\"path\")\n         .attr(\"class\", \"line opioids\")\n         .attr(\"d\", function(d) {\n             return line(groups[current_town + \"opioids\"].values);\n         });\n     // Opioids circle\n     for (i = 0; i < groups[current_town + \"opioids\"].values.length; i++) {\n\n         var x_circle_alcohol = groups[current_town + \"opioids\"].values[i].age;\n         var y_circle_alcohol = groups[current_town + \"opioids\"].values[i].value;\n\n         if (y_circle_alcohol >= 0) {\n\n             //console.log(groups[current_town+\"alcohol\"].values[i].age); \n             //console.log(\"circle opioids y\" + groups[current_town + \"opioids\"].values[i].age)\n\n             $lines_bsas.append(\"circle\")\n                 .attr(\"class\", function(d) {\n                     return \"circle opioids y\" + groups[current_town + \"opioids\"].values[i].age\n                 })\n                 .attr(\"cx\", x(groups[current_town + \"opioids\"].values[i].age))\n                 .attr(\"cy\", y(groups[current_town + \"opioids\"].values[i].value))\n                 .attr(\"r\", 3)\n         }\n     }\n\n     // Other line\n     $lines_bsas.append(\"path\")\n         .attr(\"class\", \"line other\")\n         .attr(\"d\", function(d) {\n             return line(groups[current_town + \"other\"].values);\n         });\n     // Other circle\n     for (i = 0; i < groups[current_town + \"other\"].values.length; i++) {\n\n         var x_circle_alcohol = groups[current_town + \"other\"].values[i].age;\n         var y_circle_alcohol = groups[current_town + \"other\"].values[i].value;\n\n         if (y_circle_alcohol >= 0) {\n\n             //console.log(groups[current_town+\"alcohol\"].values[i].age); \n             // console.log(\"circle other y\" + groups[current_town + \"other\"].values[i].age)\n\n             $lines_bsas.append(\"circle\")\n                 .attr(\"class\", function(d) {\n                     return \"circle other y\" + groups[current_town + \"other\"].values[i].age\n                 })\n                 .attr(\"cx\", x(groups[current_town + \"other\"].values[i].age))\n                 .attr(\"cy\", y(groups[current_town + \"other\"].values[i].value))\n                 .attr(\"r\", 3)\n         }\n     }\n\n     // Autocomplete\n\n     $(\".btn-bsas\").addClass('active');\n     d3.selectAll(\".btn-bsas\").on(\"click\", function() {\n         current_town = d3.select(this).attr(\"data-val\");\n         update();\n         $(\"#tags\").val('');\n     });\n\n\n     $(\"#tags\").autocomplete({\n         source: function(request, response) {\n             var matches = $.map(town_names, function(acItem) {\n                 if (acItem.toUpperCase().indexOf(request.term.toUpperCase()) === 0) {\n                     return acItem;\n                 }\n             });\n             response(matches);\n             //$(\"#tags\").focus(function() {\n                 // if (matches.length == 1) {\n                 //     current_town = matches[0];\n                 //     $(\".btn-bsas\").removeClass('active');\n                 //     update();\n                 // }\n             //});\n             //console.log(matches);\n         },\n         select: function(event, ui) {\n             current_town = ui.item.value;\n             $(\".btn-bsas\").removeClass('active');\n             update();\n         }\n     });\n\n     function update() {\n\n         // marriages = groups[current_town];\n         //update alcohol line\n         $lines_bsas.select(\".line.alcohol\")\n             .transition()\n             .duration(600)\n             .delay(180)\n             .attr(\"d\", function(d) {\n                 return line(groups[current_town + \"alcohol\"].values);\n             });\n\n         //console.log(groups[current_town + \"alcohol\"].values[5].value >= 0);\n\n         //update alcohol circles\n         for (i = 0; i < groups[current_town + \"alcohol\"].values.length; i++) {\n             var string_select = \".circle.alcohol.y\" + groups[current_town + \"alcohol\"].values[i].age\n                 // console.log(string_select);\n\n             if (groups[current_town + \"alcohol\"].values[i].value >= 0) {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"cx\", function(d) {\n                         return x(groups[current_town + \"alcohol\"].values[i].age)\n                     })\n                     .attr(\"cy\", function(d) {\n                         return y(groups[current_town + \"alcohol\"].values[i].value)\n                     })\n                     .attr(\"r\", 3)\n             } else {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"r\", 0)\n             }\n\n         }\n\n\n\n         //marijuana\n         $lines_bsas.select(\".line.marijuana\")\n             .transition()\n             .duration(600)\n             .attr(\"d\", function(d) {\n                 return line(groups[current_town + \"marijuana\"].values);\n             });\n         //update marijuana circles\n         for (i = 0; i < groups[current_town + \"marijuana\"].values.length; i++) {\n             var string_select = \".circle.marijuana.y\" + groups[current_town + \"marijuana\"].values[i].age\n                 //console.log(string_select);\n\n             if (groups[current_town + \"marijuana\"].values[i].value >= 0) {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"cx\", function(d) {\n                         return x(groups[current_town + \"marijuana\"].values[i].age)\n                     })\n                     .attr(\"cy\", function(d) {\n                         return y(groups[current_town + \"marijuana\"].values[i].value)\n                     })\n                     .attr(\"r\", 3)\n             } else {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"r\", 0)\n             }\n\n         }\n\n         //none\n         $lines_bsas.select(\".line.none\")\n             .transition()\n             .duration(600)\n             .attr(\"d\", function(d) {\n                 return line(groups[current_town + \"none\"].values);\n             });\n         //update none circles\n         for (i = 0; i < groups[current_town + \"none\"].values.length; i++) {\n\n\n             var string_select = \".circle.none.y\" + groups[current_town + \"none\"].values[i].age\n             var value_select = groups[current_town + \"none\"].values[i].value\n                 // console.log(string_select);\n                 // console.log(value_select);\n                 // console.log(value_select >= 0);\n\n             if (groups[current_town + \"none\"].values[i].value >= 0) {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"cx\", function(d) {\n                         return x(groups[current_town + \"none\"].values[i].age)\n                     })\n                     .attr(\"cy\", function(d) {\n                         return y(groups[current_town + \"none\"].values[i].value)\n                     })\n                     .attr(\"r\", 3);\n             } else {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"r\", 0);\n             }\n\n         }\n\n         //opioids\n         $lines_bsas.select(\".line.opioids\")\n             .transition()\n             .duration(600)\n             .attr(\"d\", function(d) {\n                 return line(groups[current_town + \"opioids\"].values);\n             });\n         //update opioids circles\n         for (i = 0; i < groups[current_town + \"opioids\"].values.length; i++) {\n\n\n             var string_select = \".circle.opioids.y\" + groups[current_town + \"opioids\"].values[i].age\n             var value_select = groups[current_town + \"opioids\"].values[i].value\n                 //console.log(string_select);\n                 //console.log(value_select);\n                 //console.log(value_select >= 0);\n\n             if (value_select >= 0) {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"cx\", function(d) {\n                         return x(groups[current_town + \"opioids\"].values[i].age)\n                     })\n                     .attr(\"cy\", function(d) {\n                         return y(groups[current_town + \"opioids\"].values[i].value)\n                     })\n                     .attr(\"r\", 3);\n             } else {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"r\", 0);\n             }\n\n         }\n\n         //other\n         $lines_bsas.select(\".line.other\")\n             .transition()\n             .duration(600)\n             .attr(\"d\", function(d) {\n                 return line(groups[current_town + \"other\"].values);\n             });\n         //update other circles\n         for (i = 0; i < groups[current_town + \"other\"].values.length; i++) {\n\n             var string_select = \".circle.other.y\" + groups[current_town + \"other\"].values[i].age\n             var value_select = groups[current_town + \"other\"].values[i].value\n                 // console.log(string_select);\n                 // console.log(value_select);\n                 // console.log(value_select >= 0);\n\n             if (value_select >= 0) {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"cx\", function(d) {\n                         return x(groups[current_town + \"other\"].values[i].age)\n                     })\n                     .attr(\"cy\", function(d) {\n                         return y(groups[current_town + \"other\"].values[i].value)\n                     })\n                     .attr(\"r\", 3);\n             } else {\n                 $lines_bsas.selectAll(string_select)\n                     .transition()\n                     .duration(600)\n                     .attr(\"r\", 0);\n             }\n\n         }\n\n     }\n\n\n\n\n     // alcohol\n     var focusalcohol = $lines_bsas.append(\"g\")\n         .attr(\"class\", \"focus alcohol\")\n         .style(\"display\", \"none\");\n     focusalcohol.append(\"circle\")\n         .attr(\"r\", 3);\n     focusalcohol.append(\"text\")\n         .attr(\"x\", 9)\n         .attr(\"dy\", \".35em\");\n\n     // marijuana\n     var focusmarijuana = $lines_bsas.append(\"g\")\n         .attr(\"class\", \"focus marijuana\")\n         .style(\"display\", \"none\");\n     focusmarijuana.append(\"circle\")\n         .attr(\"r\", 3);\n     focusmarijuana.append(\"text\")\n         .attr(\"x\", 9)\n         .attr(\"dy\", \".35em\");\n\n     // none\n     var focusnone = $lines_bsas.append(\"g\")\n         .attr(\"class\", \"focus none\")\n         .style(\"display\", \"none\");\n     focusnone.append(\"circle\")\n         .attr(\"r\", 3);\n     focusnone.append(\"text\")\n         .attr(\"x\", 9)\n         .attr(\"dy\", \".35em\");\n\n     // opioids\n     var focusopioids = $lines_bsas.append(\"g\")\n         .attr(\"class\", \"focus opioids\")\n         .style(\"display\", \"none\");\n     focusopioids.append(\"circle\")\n         .attr(\"r\", 3);\n     focusopioids.append(\"text\")\n         .attr(\"x\", 9)\n         .attr(\"dy\", \".35em\");\n\n     // none\n     var focusother = $lines_bsas.append(\"g\")\n         .attr(\"class\", \"focus other\")\n         .style(\"display\", \"none\");\n     focusother.append(\"circle\")\n         .attr(\"r\", 3);\n     focusother.append(\"text\")\n         .attr(\"x\", 9)\n         .attr(\"dy\", \".35em\");\n\n     // Events\n     $lines_bsas.append(\"rect\")\n         .attr(\"class\", \"overlay\")\n         .attr(\"width\", width_bsas)\n         .attr(\"height\", height_bsas)\n         .on(\"mouseover\", function() {\n             focusmarijuana.style(\"display\", null);\n             focusalcohol.style(\"display\", null);\n             focusnone.style(\"display\", null);\n             focusopioids.style(\"display\", null);\n             focusother.style(\"display\", null);\n             //focusage.style(\"display\", null);\n         })\n         .on(\"mouseout\", function() {\n             focusmarijuana.style(\"display\", \"none\");\n             focusalcohol.style(\"display\", \"none\");\n             focusnone.style(\"display\", \"none\");\n             focusopioids.style(\"display\", \"none\");\n             focusother.style(\"display\", \"none\");\n             //focusage.style(\"display\", \"none\");\n         })\n         .on(\"mousemove\", mousemove);\n\n     function mousemove() {\n\n\n\n         var x0 = x.invert(d3.mouse(this)[0])\n\n         // Alcohol\n         var i_alcohol = bisectAge(groups[current_town + \"alcohol\"].values, x0, 1),\n             d0_alcohol = groups[current_town + \"alcohol\"].values[i_alcohol - 1],\n             d1_alcohol = groups[current_town + \"alcohol\"].values[i_alcohol],\n             d_alcohol = x0 - d0_alcohol.age > d1_alcohol.age - x0 ? d1_alcohol : d0_alcohol;\n\n         if (d_alcohol.value >= 0) {\n             focusalcohol.attr(\"transform\", \"translate(\" + x(d_alcohol.age) + \",\" + y(d_alcohol.value) + \")\");\n             focusalcohol.select(\"text\").text(percent(d_alcohol.value));\n             focusalcohol.select(\"circle\").attr(\"r\", 4);\n         } else {\n             focusalcohol.select(\"circle\").attr(\"r\", 0);\n             focusalcohol.select(\"text\").text(\"\");\n         }\n\n         // Marijuana\n\n         var i_marijuana = bisectAge(groups[current_town + \"marijuana\"].values, x0, 1),\n             d0_marijuana = groups[current_town + \"marijuana\"].values[i_marijuana - 1],\n             d1_marijuana = groups[current_town + \"marijuana\"].values[i_marijuana],\n             d_marijuana = x0 - d0_marijuana.age > d1_marijuana.age - x0 ? d1_marijuana : d0_marijuana;\n\n\n         // console.log(d_marijuana.value + \" \" + d_marijuana.age);\n         // console.log(d_marijuana.value >= 0);\n\n         if (d_marijuana.value >= 0) {\n             focusmarijuana.attr(\"transform\", \"translate(\" + x(d_marijuana.age) + \",\" + y(d_marijuana.value) + \")\");\n             focusmarijuana.select(\"text\").text(percent(d_marijuana.value));\n             focusmarijuana.select(\"circle\").attr(\"r\", 4);\n         } else {\n             focusmarijuana.select(\"circle\").attr(\"r\", 0);\n             focusmarijuana.select(\"text\").text(\"\");\n         }\n\n         // None\n\n         var i_none = bisectAge(groups[current_town + \"none\"].values, x0, 1),\n             d0_none = groups[current_town + \"none\"].values[i_none - 1],\n             d1_none = groups[current_town + \"none\"].values[i_none],\n             d_none = x0 - d0_none.age > d1_none.age - x0 ? d1_none : d0_none;\n\n         if (d_none.value >= 0) {\n             focusnone.attr(\"transform\", \"translate(\" + x(d_none.age) + \",\" + y(d_none.value) + \")\");\n             focusnone.select(\"text\").text(percent(d_none.value));\n             focusnone.select(\"circle\").attr(\"r\", 4);\n         } else {\n             focusnone.select(\"circle\").attr(\"r\", 0);\n             focusnone.select(\"text\").text(\"\");\n         }\n\n\n         // Opioids\n         var i_opioids = bisectAge(groups[current_town + \"opioids\"].values, x0, 1),\n             d0_opioids = groups[current_town + \"opioids\"].values[i_opioids - 1],\n             d1_opioids = groups[current_town + \"opioids\"].values[i_opioids],\n             d_opioids = x0 - d0_opioids.age > d1_opioids.age - x0 ? d1_opioids : d0_opioids;\n\n         if (d_opioids.value >= 0) {\n             focusopioids.attr(\"transform\", \"translate(\" + x(d_opioids.age) + \",\" + y(d_opioids.value) + \")\");\n             focusopioids.select(\"text\").text(percent(d_opioids.value));\n             focusopioids.select(\"circle\").attr(\"r\", 4);\n         } else {\n             focusopioids.select(\"circle\").attr(\"r\", 0);\n             focusopioids.select(\"text\").text(\"\");\n         }\n\n\n         // other\n         var i_other = bisectAge(groups[current_town + \"other\"].values, x0, 1),\n             d0_other = groups[current_town + \"other\"].values[i_other - 1],\n             d1_other = groups[current_town + \"other\"].values[i_other],\n             d_other = x0 - d0_other.age > d1_other.age - x0 ? d1_other : d0_other;\n\n         //console.log(d_other.value);\n\n         if (d_other.value >= 0) {\n             focusother.attr(\"transform\", \"translate(\" + x(d_other.age) + \",\" + y(d_other.value) + \")\");\n             focusother.select(\"text\").text(percent(d_other.value));\n             focusother.select(\"circle\").attr(\"r\", 4);\n         } else {\n             focusother.select(\"circle\").attr(\"r\", 0);\n             focusother.select(\"text\").text(\"\");\n         }\n\n\n         // Adjust label horizontal positions.\n         if (x0 > 80) {\n             focusalcohol.select(\"text\").attr(\"x\", 3).attr(\"y\", -7).attr(\"text-anchor\", \"beginning\");\n             focusmarijuana.select(\"text\").attr(\"x\", 3).attr(\"y\", -7).attr(\"text-anchor\", \"beginning\");\n             focusnone.select(\"text\").attr(\"x\", 3).attr(\"y\", -7).attr(\"text-anchor\", \"beginning\");\n             focusopioids.select(\"text\").attr(\"x\", 3).attr(\"y\", -7).attr(\"text-anchor\", \"beginning\");\n             focusother.select(\"text\").attr(\"x\", 3).attr(\"y\", -7).attr(\"text-anchor\", \"beginning\");\n         } else {\n             focusalcohol.select(\"text\").attr(\"x\", 10).attr(\"text-anchor\", \"beginning\");\n             focusmarijuana.select(\"text\").attr(\"x\", 10).attr(\"text-anchor\", \"beginning\");\n             focusnone.select(\"text\").attr(\"x\", 10).attr(\"text-anchor\", \"beginning\");\n             focusopioids.select(\"text\").attr(\"x\", 10).attr(\"text-anchor\", \"beginning\");\n             focusother.select(\"text\").attr(\"x\", 10).attr(\"text-anchor\", \"beginning\");\n         }\n\n\n\n     }\n\n }); // @end d3.tsv()\n\n\n function type(d, i) {\n\n     d3.keys(d).forEach(function(key) {\n         d[key] = +d[key];\n         if (key != 'age') {\n             if (!(key in groups)) {\n                 groups[key] = {\n                     'values': [{\n                         age: d.age,\n                         value: d[key]\n                     }]\n                 };\n             } else {\n                 groups[key]['values'].push({\n                     age: d.age,\n                     value: d[key]\n                 });\n             }\n         }\n     });\n\n     return d;\n\n }\n","dataset = [\n    { raceth: \"All\", \"2014\": 19.8, \"2015\": 23.2 },\n    { raceth: \"White non-Hispanic\", \"2014\": 23.3, \"2015\": 27.1 },\n    { raceth: \"Black non-Hispanic\", \"2014\": 11.1, \"2015\": 13.6 },\n    { raceth: \"Hispanic\", \"2014\": 15.3, \"2015\": 19.5 }\n];\n\nvar color = d3.scale.ordinal()\n    .range([\"#2166ac\", \"#92c5de\"]);\nvar margin = { top: (parseInt(d3.select('#race_ethnicity_chart').style('width'), 10) / 10), right: (parseInt(d3.select('#race_ethnicity_chart').style('width'), 10) / 20), bottom: (parseInt(d3.select('#race_ethnicity_chart').style('width'), 10) / 5), left: (parseInt(d3.select('#race_ethnicity_chart').style('width'), 10) / 10) },\n    width = parseInt(d3.select('#race_ethnicity_chart').style('width'), 10) - margin.left - margin.right,\n    height = parseInt(d3.select('#race_ethnicity_chart').style('height'), 10) - margin.top - margin.bottom;\n\nvar x0 = d3.scale.ordinal()\n    .rangeRoundBands([0, width], .1);\n\nvar x1 = d3.scale.ordinal();\n\nvar y = d3.scale.linear()\n    .range([height, 0]);\n\n//var colorRange = d3.scale.category20();\n//var color = d3.scale.ordinal()\n//.range(colorRange.range());\n\n\n\nvar xAxis_bars = d3.svg.axis()\n    .scale(x0)\n    .orient(\"bottom\");\n\nvar yAxis_bars = d3.svg.axis()\n    .scale(y)\n    .orient(\"left\")\n    .tickFormat(d3.format(\".0f\"));\n\nvar divtooltip_raceeth = d3.select(\"#race_ethnicity_chart\").append(\"div\").attr(\"class\", \"tooltip_raceeth\");\n\n\nvar $bars_race = d3.select(\"#race_ethnicity_chart\").append(\"svg\")\n    .attr(\"width\", width + margin.left + margin.right)\n    .attr(\"height\", height + margin.top + margin.bottom)\n    .append(\"g\")\n    .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n\n\n\n\nvar options = d3.keys(dataset[0]).filter(function(key) {\n    return key !== \"raceth\";\n});\n\ndataset.forEach(function(d) {\n    d.values = options.map(function(name) {\n        return { name: name, value: +d[name] };\n    });\n});\n\nx0.domain(dataset.map(function(d) {\n    return d.raceth;\n}));\nx1.domain(options).rangeRoundBands([0, x0.rangeBand()]);\ny.domain([0, d3.max(dataset, function(d) {\n    return d3.max(d.values, function(d) {\n        return d.value;\n    });\n})]);\n\n$bars_race.append(\"g\")\n    .attr(\"class\", \"x axis-race\")\n    .attr(\"transform\", \"translate(10,\" + height + \")\")\n    .call(xAxis_bars)\n    .selectAll(\".tick text\")\n    .call(wrap, x0.rangeBand());\n\n$bars_race.append(\"g\")\n    .attr(\"class\", \"y axis-race\")\n    .call(yAxis_bars)\n    .append(\"text\")\n    .attr(\"transform\", \"rotate(-90)\")\n    .attr(\"y\", -35)\n    .attr(\"dy\", \".71em\")\n    .style(\"text-anchor\", \"end\")\n    .text(\"Age Adjusted Rates per 100,000\");\n\nvar bar = $bars_race.selectAll(\".bar\")\n    .data(dataset)\n    .enter().append(\"g\")\n    .attr(\"class\", \"rect\")\n    .attr(\"transform\", function(d) {\n        return \"translate(\" + (x0(d.raceth) - 10) + \",0)\";\n    });\n\n\nbar.selectAll(\"rect\")\n    .data(function(d) {\n        return d.values;\n    })\n    .enter().append(\"rect\")\n    .attr(\"width\", x1.rangeBand())\n    .attr(\"x\", function(d) {\n        return x1(d.name) + 5;\n    })\n    .attr(\"y\", function(d) {\n        return y(d.value);\n    })\n    .attr(\"value\", function(d) {\n        return d.name;\n    })\n    .attr(\"height\", function(d) {\n        return height - y(d.value);\n    })\n    .style(\"fill\", function(d) {\n        return color(d.name);\n    })\n    .style(\"fill\", function(d) {\n        return color(d.name);\n    });\n\n//bar.on(\n//\"mouseover\", function(){ \n//d3.select(this).attr(\"fill\",\"red !important\");\n//});\n\nbar\n    .on(\"mousemove\", function(d) {\n        divtooltip_raceeth.style(\"left\", d3.event.pageX - $(\"#race_ethnicity_chart\").offset().left + \"px\");\n        divtooltip_raceeth.style(\"top\", d3.event.pageY - $(\"#race_ethnicity_chart\").offset().top + \"px\");\n        divtooltip_raceeth.style(\"display\", \"inline-block\");\n        var x = d3.event.pageX,\n            y = d3.event.pageY\n        var elements = document.querySelectorAll(':hover');\n        l = elements.length\n        l = l - 1\n        elementData = elements[l].__data__\n            //divtooltip_raceeth.html(\"<rate>\" + (elementData.value) + \"</rate>\"  +\"<br>\" + \"<reth> - \" + (d.raceth) + \" - </reth>\" + \"<br>\" + \"<year>\" + (elementData.name) + \"</year>\");\n        divtooltip_raceeth.html(\"<rate>\" + (elementData.value) + \"</rate>\");\n\n    });\n\nbar\n    .on(\"mouseout\", function(d) {\n        divtooltip_raceeth.style(\"display\", \"none\");\n    });\n\n\n\nvar legend = $bars_race.selectAll(\".legend\")\n    .data(options.slice())\n    .enter().append(\"g\")\n    .attr(\"class\", \"legend\")\n    .attr(\"transform\", function(d, i) {\n        return \"translate(0,\" + i * 20 + \")\";\n    });\n\nlegend.append(\"rect\")\n    .attr(\"x\", width - 18)\n    .attr(\"width\", 18)\n    .attr(\"height\", 18)\n    .style(\"fill\", color);\n\nlegend.append(\"text\")\n    .attr(\"x\", width - 24)\n    .attr(\"y\", 9)\n    .attr(\"dy\", \".35em\")\n    .style(\"text-anchor\", \"end\")\n    .text(function(d) {\n        return d;\n    });\n\nfunction wrap(text, width) {\n    text.each(function() {\n        var text = d3.select(this),\n            words = text.text().split(/\\s+/).reverse(),\n            word,\n            line = [],\n            lineNumber = 0,\n            lineHeight = 1.1, // ems\n            y = text.attr(\"y\"),\n            dy = parseFloat(text.attr(\"dy\")),\n            tspan = text.text(null).append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", dy + \"em\");\n        while (word = words.pop()) {\n            line.push(word);\n            tspan.text(line.join(\" \"));\n            if (tspan.node().getComputedTextLength() > width) {\n                line.pop();\n                tspan.text(line.join(\" \"));\n                line = [word];\n                tspan = text.append(\"tspan\").attr(\"x\", 0).attr(\"y\", y).attr(\"dy\", ++lineNumber * lineHeight + dy + \"em\").text(word);\n            }\n        }\n    });\n}\n","(function() {\n  var slice = [].slice;\n\n  function queue(parallelism) {\n    var q,\n        tasks = [],\n        started = 0, // number of tasks that have been started (and perhaps finished)\n        active = 0, // number of tasks currently being executed (started but not finished)\n        remaining = 0, // number of tasks not yet finished\n        popping, // inside a synchronous task callback?\n        error = null,\n        await = noop,\n        all;\n\n    if (!parallelism) parallelism = Infinity;\n\n    function pop() {\n      while (popping = started < tasks.length && active < parallelism) {\n        var i = started++,\n            t = tasks[i],\n            a = slice.call(t, 1);\n        a.push(callback(i));\n        ++active;\n        t[0].apply(null, a);\n      }\n    }\n\n    function callback(i) {\n      return function(e, r) {\n        --active;\n        if (error != null) return;\n        if (e != null) {\n          error = e; // ignore new tasks and squelch active callbacks\n          started = remaining = NaN; // stop queued tasks from starting\n          notify();\n        } else {\n          tasks[i] = r;\n          if (--remaining) popping || pop();\n          else notify();\n        }\n      };\n    }\n\n    function notify() {\n      if (error != null) await(error);\n      else if (all) await(error, tasks);\n      else await.apply(null, [error].concat(tasks));\n    }\n\n    return q = {\n      defer: function() {\n        if (!error) {\n          tasks.push(arguments);\n          ++remaining;\n          pop();\n        }\n        return q;\n      },\n      await: function(f) {\n        await = f;\n        all = false;\n        if (!remaining) notify();\n        return q;\n      },\n      awaitAll: function(f) {\n        await = f;\n        all = true;\n        if (!remaining) notify();\n        return q;\n      }\n    };\n  }\n\n  function noop() {}\n\n  queue.version = \"1.0.7\";\n  if (typeof define === \"function\" && define.amd) define(function() { return queue; });\n  else if (typeof module === \"object\" && module.exports) module.exports = queue;\n  else this.queue = queue;\n})();\n","var Vis = (function(d3) {\n    var geojson;\n    queue()\n        .defer(d3.json, 'js/data/TOWN.geo.json')\n        .defer(d3.json, 'js/data/data.json')\n        .await(visualize);\n\n    var width = 525,\n        height = 325;\n\n    var projection = d3.geo.conicConformal()\n        .parallels([41 + 43 / 60, 42 + 41 / 60])\n        .rotate([71 + 30 / 60, -41])\n        .scale([7500])\n        .translate([250, 350]);\n\n    var $maps_sub = d3.select(\"#carte\").append(\"svg\")\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n    var path = d3.geo.path().projection(projection),\n        palette = d3.scale.threshold().domain([0, 0.1, 0.15, 0.35, 0.6, 1.00]).range(colorbrewer.YlOrBr[6]);\n\n\n\n    function visualize(error, states, data) {\n\n        var visualizationWrapper = d3.select('#multi-maps');\n\n        data.data.forEach(function(data, i) {\n            var wrapper = visualizationWrapper\n                .append('div')\n                .style({\n                    width: width + 'px',\n                    height: height + 'px'\n                });\n\n            createMap(wrapper, states, data)\n        });\n    }\n\n\n\n    function createMap(wrapper, geo, data) {\n\n        wrapper.append('p')\n            .text(data.key)\n            .attr('class', 'legend');\n        wrapper.append('p2')\n            .text(\"\")\n            .attr('class', 'legend');\n\n        wrapper.append('y');\n\n        var $maps_sub = wrapper.append('svg')\n            .attr({\n                width: width,\n                height: height\n            });\n\n        $maps_sub.selectAll('path')\n            .data(geo.features)\n            .enter()\n            .append('path')\n            .attr('d', path)\n            .style(\"stroke\", \"white\")\n            .style(\"stroke-width\", \"0.0px\")\n            .style('fill', function(d, i) {\n                var value = data.values[d.properties.TOWN];\n                return palette(value);\n            })\n            .on('mouseover', function(d, i) {\n\n            })\n            .on('mouseout', function(d, i) {\n\n            })\n            .attr('class', function(d) {\n                return d.properties.TOWN.toLowerCase()\n            })\n            .on('mouseenter', function(d, i) {\n                notify('.' + d.properties.TOWN.toLowerCase(), 'select');\n                // var currentState = this;\n                // console.log(this);\n                // d3.select(this).style('fill-opacity', 0.4).style(\"stroke\", \"white\").style(\"stroke-width\", \"1.5px\");\n            })\n            .on('mouseleave', function(d) {\n                notify('.' + d.properties.TOWN.toLowerCase(), 'unselect');\n\n            })\n            .on('select', function(self) {\n                var geoData = self.data();\n                var town_value\n\n                if (data.values[geoData[0].properties.TOWN] !== 'Null') {\n                    //console.log(data.values[geoData[0].properties.TOWN] == 'Null');\n                    town_value = d3.format(\"%,.2f\")(data.values[geoData[0].properties.TOWN]);\n                } else {\n                    town_value = \"N/A\";\n                };\n\n                //console.log(town_value);\n\n                self.node().parentNode.parentNode.getElementsByTagName('p2')[0].innerHTML = (geoData[0].properties.TOWN + \":  \" + town_value);\n                d3.select((self.node())).style('fill-opacity', 0.4).style(\"stroke\", \"white\").style(\"stroke-width\", \"1.5px\");\n            })\n            .on('unselect', function(self) {\n                self.node().parentNode.parentNode.getElementsByTagName('p2')[0].innerHTML = \"\";\n                d3.selectAll('path').style({ 'fill-opacity': 1 }).style(\"stroke\", \"white\").style(\"stroke-width\", \"0.0px\");\n            })\n\n        function notify(selector, eventName) {\n            d3.selectAll(selector)[0].forEach(function(el, i) {\n                var shape = d3.select(el);\n                shape.on(eventName)(shape);\n            });\n        }\n\n    }\n\n    var opChgScale = d3.scale.threshold().domain([0, 0.1, 0.15, 0.35, 0.6, 1.00]).range(colorbrewer.YlOrBr[6])\n    opChgScale.domainStrings = function() {\n        return (['0%', '>0-10%', '>10-15%', '>15-35%',\n            '>35-60%', '>60-100%'\n        ]);\n    };\n    //popChgScale.domainStrings = function() { return (['< 0.1', '0.25-0.50', '0.50-0.75', '0.75-1.0', '1.0-1.25', \n    //'1.25-1.50', '1.50-1.75', '1.75-2.0', '> 2.0']); }; \n    generateLegend_map_sub(opChgScale, 'legend_sub', 'Heroin Primary Substance of Abuse upon Seeking Treatment (%)');\n\n    function generateLegend_map_sub(scale, szDivId, szCaption) {\n        var width = 550,\n            height = 70;\n\n        var $maps_sub_svg = d3.select('#' + szDivId).append(\"svg\")\n            .attr(\"width\", width)\n            .attr(\"height\", height);\n\n        var $maps_sub_legends = $maps_sub_svg.append(\"g\");\n\n        // Create data array.\n        var legendData = [];\n        legendData.push({ d: -9999, r: '#f1f1f1', s: 'N/A*' });\n        var i;\n        for (i = 0; i < scale.domain().length; i++) {\n            legendData.push({ d: scale.domain()[i], r: scale.range()[i], s: scale.domainStrings()[i] });\n        }\n\n        $maps_sub_legends.selectAll(\"rect\")\n            .data(legendData)\n            .enter().append(\"rect\")\n            .attr(\"height\", 20)\n            .attr(\"width\", 50)\n            .attr(\"x\", function(d, i) {\n                return i * 55;\n            })\n            .attr(\"y\", 20)\n            .style(\"stroke\", \"black\")\n            .style(\"stroke-width\", \"0.25px\")\n            .style(\"fill\", function(d, i) {\n                return d.r;\n            });\n\n        $maps_sub_legends.selectAll(\"text\")\n            .data(legendData)\n            .enter().append(\"text\")\n            .attr(\"x\", function(d, i) {\n                return i * 55;\n            })\n            .attr(\"y\", 55)\n            .text(function(d, i) {\n                return d.s;\n            })\n            .style(\"font-size\", \"12px\");\n\n        $maps_sub_legends.append(\"text\")\n            .attr(\"class\", \"caption\")\n            .attr(\"y\", 12)\n            .text(szCaption);\n    }\n\n})(d3);\n","/*======================================================================\r\n MultiLines \r\n ======================================================================*/\r\nvar margin = {\r\n    top: 20,\r\n    right: 20,\r\n    bottom: 50,\r\n    left: 50,\r\n};\r\n\r\nvar width = 600;\r\nvar height = 400;\r\n\r\nvar MDG = 29;\r\n\r\nvar Massachusetts = [\"MA\"];\r\nvar UnitedStates = [\"USA\"];\r\n\r\n//Set up date formatting and years\r\nvar dateFormat = d3.time.format(\"%Y\");\r\n\r\n//Set up scales\r\nvar xScale = d3.time.scale()\r\n    .range([margin.left, width - margin.right - margin.left]);\r\n\r\nvar yScale = d3.scale.sqrt()\r\n    .range([margin.top, height - margin.bottom]);\r\n\r\n//Configure axis generators\r\nvar xAxis_death = d3.svg.axis()\r\n    .scale(xScale)\r\n    .orient(\"bottom\")\r\n    .ticks(15)\r\n    .tickFormat(function(d) {\r\n        return dateFormat(d);\r\n    })\r\n    .innerTickSize([8]);\r\n\r\nvar yAxis_death = d3.svg.axis()\r\n    .scale(yScale)\r\n    .orient(\"left\")\r\n    .innerTickSize([8]);\r\n\r\n//defines a function to be used to append the title to the tooltip.  you can set how you want it to display here.\r\n//var maketip = function(d) {\r\n//    var tip = '<p class=\"tip3\">' + d.name + '<p class=\"tip1\">' + NumbType(d.value) + '</p> <p class=\"tip3\">' + formatDate(d.date) + '</p>';\r\n//    return tip;\r\n//}\r\n\r\n// add a tooltip to the page - not to the svg itself!\r\nvar tooltip_death = d3.select(\"#lines_death\")\r\n    .append(\"div\")\r\n    .attr(\"class\", \"lines-tooltip\");\r\n\r\n//Configure line \r\n// each line dataset must have a d.year and a d.rate for this to work.\r\nvar line_death = d3.svg.line()\r\n    .x(function(d) {\r\n        return xScale(dateFormat.parse(d.year));\r\n    })\r\n    .y(function(d) {\r\n        return yScale(+d.rate)\r\n    })\r\n    .defined(function(d) {\r\n        return yScale(+d.rate); });\r\n\r\n//Create the empty SVG image\r\nvar $lines_death = d3.select(\"#lines_death\")\r\n    .append(\"svg\")\r\n    .attr(\"width\", width)\r\n    .attr(\"height\", height);\r\n\r\n/*======================================================================\r\n   Creating the Multiple Lines from the Data\r\n ======================================================================*/\r\n\r\n//Load data - first is opioid mortality rates. \r\nd3.csv(\"js/data/death_states.csv\", function(data) {\r\n    var years = d3.keys(data[0]).slice(1, 65); //\r\n    //console.log(years);\r\n\r\n    //Create a new, empty array to hold our restructured dataset\r\n    var dataset = [];\r\n\r\n    //Loop once for each row in data\r\n    data.forEach(function(d, i) {\r\n\r\n        var OMRs = [];\r\n\r\n        years.forEach(function(y) { //Loop through all the years - and get the rates for this data element\r\n\r\n\r\n            if (d[y]) { /// What we are checking is if the \"y\" value - the year string from our array, which would translate to a column in our csv file - is empty or not.\r\n\r\n                OMRs.push({ //Add a new object to the new rates data array - for year, rate. These are OBJECTS that we are pushing onto the array\r\n                    year: y,\r\n                    rate: d[y], // this is the value for, for example, d[\"2004\"]\r\n                    Geography: d.Geography,\r\n                    FullName: d.FullName\r\n                });\r\n            }\r\n\r\n        });\r\n\r\n        dataset.push({ // At this point we are accessing one index of data from our original csv \"data\", above and we have created an array of year and rate data from this index. We then create a new object with the Geography value from this index and the array that we have made from this index.\r\n            Geography: d.Geography,\r\n            FullName: d.FullName,\r\n            rates: OMRs // we just built this from the current index.\r\n        });\r\n\r\n    });\r\n    //Set scale domains - max and min of the years\r\n    xScale.domain(\r\n        d3.extent(years, function(d) {\r\n            return dateFormat.parse(d);\r\n        }));\r\n\r\n    // max of rates to 0 (reversed, remember)\r\n    yScale.domain([\r\n        d3.max(dataset, function(d) {\r\n            return d3.max(d.rates, function(d) {\r\n                return +d.rate;\r\n            });\r\n        }),\r\n        0\r\n    ]);\r\n\r\n\r\n    //Make a group for each Geography\r\n    var groups = $lines_death.selectAll(\"g.lines-death\")\r\n        .data(dataset)\r\n        .enter()\r\n        .append(\"g\")\r\n        .attr(\"class\", \"lines-death\");\r\n\r\n    //Within each group, create a new line/path,\r\n    //binding just the rates data to each one\r\n    groups.selectAll(\"path\")\r\n        .data(function(d) { // because there's a group with data already...\r\n            return [d.rates]; // it has to be an array for the line function\r\n        })\r\n        .enter()\r\n        .append(\"path\")\r\n        .attr(\"class\", \"line-death\")\r\n        .classed(\"massachusetts\", function(d, i) {\r\n            //console.log(d[i].Geography);\r\n            if ($.inArray(d[i].Geography, Massachusetts) != -1) {\r\n                //console.log(\"true\");\r\n                return true;\r\n            } else {\r\n                //console.log(\"false\");\r\n                return false;\r\n            }\r\n        })\r\n        .classed(\"usa\", function(d, i) {\r\n            //console.log(d[i].Geography);\r\n            if ($.inArray(d[i].Geography, UnitedStates) != -1) {\r\n                //console.log(\"true\");\r\n                return true;\r\n            } else {\r\n                //console.log(\"false\");\r\n                return false;\r\n            }\r\n        })\r\n        .attr(\"d\", line_death);\r\n\r\n\r\n    /*======================================================================\r\n      Adding the Axes\r\n    ======================================================================*/\r\n\r\n\r\n    var margin = {\r\n        top: 20,\r\n        right: 20,\r\n        bottom: 50,\r\n        left: 50,\r\n    };\r\n\r\n    var width = 600;\r\n    var height = 400;\r\n\r\n\r\n\r\n    $lines_death.append(\"g\")\r\n        .attr(\"class\", \"x axis-death\")\r\n        // .attr(\"transform\", \"translate(0,\" + (height - margin.bottom) + \")\")\r\n        .attr(\"transform\", \"translate(0,\" + (height - margin.bottom - margin.top / 2) + \")\")\r\n        .call(xAxis_death)\r\n        .append(\"text\")\r\n        .attr(\"x\", width - margin.left)\r\n        .attr(\"y\", margin.bottom / 2)\r\n        .attr(\"dy\", \"1em\")\r\n        .style(\"text-anchor\", \"end\")\r\n        .attr(\"class\", \"label\")\r\n        .text(\"Year\");\r\n\r\n    $lines_death.append(\"g\")\r\n        .attr(\"class\", \"y axis-death\")\r\n        // .attr(\"transform\", \"translate(\" + margin.left + \",0)\")\r\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + (-margin.top / 2) + ')')\r\n        .call(yAxis_death)\r\n        .append(\"text\")\r\n        .attr(\"transform\", \"rotate(-90)\")\r\n        .attr(\"x\", -margin.top)\r\n        .attr(\"y\", -margin.left)\r\n        .attr(\"dy\", \"1em\")\r\n        .style(\"text-anchor\", \"end\")\r\n        .attr(\"class\", \"label\")\r\n        .text(\"Opioid Related Death Rate per 100,000 People\");\r\n\r\n    /*======================================================================\r\n      MDG line\r\n    ======================================================================*/\r\n\r\n    /*svg.append(\"line\")\r\n        .attr(\"class\", \"MDG\")\r\n        .attr(\"x1\", margin.left)\r\n        .attr(\"y1\", yScale(MDG))\r\n        .attr(\"x2\", width - margin.left - margin.right + 15)\r\n        .attr(\"y2\", yScale(MDG));*/\r\n    $lines_death.append(\"text\")\r\n        .attr(\"class\", \"aside-ma\")\r\n        .attr(\"x\", width - margin.left - 10)\r\n        .attr(\"y\", yScale(9.8) - 6)\r\n        .attr(\"dy\", \"1em\")\r\n        .style(\"text-anchor\", \"start\")\r\n        .text(\"MA\");\r\n\r\n    $lines_death.append(\"text\")\r\n        .attr(\"class\", \"aside-usa\")\r\n        .attr(\"x\", width - margin.left - 10)\r\n        .attr(\"y\", yScale(5.9) - 6)\r\n        .attr(\"dy\", \"1em\")\r\n        .style(\"text-anchor\", \"start\")\r\n        .text(\"USA\");\r\n\r\n    /*======================================================================\r\n      Mouse Functions\r\n    ======================================================================*/\r\n    d3.selectAll(\"g.lines-death\")\r\n        .on(\"mouseover\", mouseoverFunc)\r\n        .on(\"mouseout\", mouseoutFunc)\r\n        .on(\"mousemove\", mousemoveFunc);\r\n\r\n    function mouseoutFunc() {\r\n\r\n        d3.selectAll(\"path.line-death\").classed(\"unfocused\", false).classed(\"focused\", false);\r\n        tooltip_death.style(\"display\", \"none\"); // this sets it to invisible!\r\n    }\r\n\r\n    function mouseoverFunc(d, i) {\r\n\r\n        d3.selectAll(\"path.line\").classed(\"unfocused\", true);\r\n        d3.select(this).select(\"path.line-death\").classed(\"unfocused\", false).classed(\"focused\", true);\r\n        tooltip_death\r\n            .style(\"display\", \"block\") // this removes the display none setting from it\r\n            .html(\"<p><span class='lines-tooltipHeader sans'>\" + d.FullName + \"</span></p>\");\r\n        //console.log(d.FullName);\r\n        // console.log(d.rates[i]);\r\n\r\n    }\r\n\r\n    function mousemoveFunc(d) {\r\n        //console.log(\"events\", window.event, d3.event);\r\n        tooltip_death\r\n            .style(\"top\", (d3.event.pageY / 3 - 400) + \"px\")\r\n            .style(\"left\", (d3.event.pageX / 3 - 400) + \"px\");\r\n    }\r\n\r\n\r\n\r\n}); // end of data csv\r\n","$(document).ready(function() {\n\n    var prescription = [{\n        \"Yes\": 83,\n        \"No\": 17\n    }, {\n        \"Yes\": 57,\n        \"No\": 43\n    }, {\n        \"Yes\": 50,\n        \"No\": 50\n    }, {\n        \"Yes\": 37,\n        \"No\": 63\n    }];\n\n    var heroin = [{\n        \"Yes\": 65,\n        \"No\": 35\n    }, {\n        \"Yes\": 28,\n        \"No\": 72\n    }, {\n        \"Yes\": 20,\n        \"No\": 80\n    }, {\n        \"Yes\": 13,\n        \"No\": 87\n    }];\n\n    var fentanyl = [{\n        \"Yes\": 68,\n        \"No\": 32\n    }, {\n        \"Yes\": 30,\n        \"No\": 70\n    }, {\n        \"Yes\": 22,\n        \"No\": 78\n    }, {\n        \"Yes\": 17,\n        \"No\": 83\n    }];\n\n    var both = [{\n        \"Yes\": 64,\n        \"No\": 36\n    }, {\n        \"Yes\": 24,\n        \"No\": 76\n    }, {\n        \"Yes\": 15,\n        \"No\": 85\n    }, {\n        \"Yes\": 9,\n        \"No\": 91\n    }];\n\n    var methadone = [{\n        \"Yes\": 76,\n        \"No\": 24\n    }, {\n        \"Yes\": 46,\n        \"No\": 54\n    }, {\n        \"Yes\": 41,\n        \"No\": 59\n    }, {\n        \"Yes\": 27,\n        \"No\": 73\n    }];\n\n    var buprenorphine = [{\n        \"Yes\": 60,\n        \"No\": 40\n    }, {\n        \"Yes\": 60,\n        \"No\": 40\n    }, {\n        \"Yes\": 60,\n        \"No\": 40\n    }, {\n        \"Yes\": 60,\n        \"No\": 40\n    }];\n\n\n\n\n    var data_substance = prescription;\n    var time = 0;\n    asignVal_substance(data_substance, time);\n    $(\"#studyperiod\").addClass(\"active\");\n\n    // $(\"#options_substance\").on('input change', function() {\n    //     data_substance = eval(($(\"#options_substance option:selected\").val()));\n    //     asignVal_substance(data_substance, time);\n    // });\n\n\n    $(\".btn-time\").on('click', function() {\n        $('.btn-time').removeClass(\"active\");\n        $(this).addClass(\"active\");\n        time = parseInt($(this).val());\n        asignVal_substance(data_substance, time);\n        var time_period;\n        switch (time) {\n            case 0:\n                time_period = \"During the Study Period\";\n                break;\n            case 1:\n                time_period = \"6 Months Before Death\";\n                break;\n            case 2:\n                time_period = \"3 Months Before Death\";\n                break;\n            case 3:\n                time_period = \"1 Month Before Death\";\n                break;\n        }\n        $(\"#time-perioid\").html(time_period.toLowerCase());\n        $(\"#label_blocks\").html(time_period);\n    });\n\n\n    function asignVal_substance(type, time) {\n        $(\"#people\").empty();\n        $('#people').each(function() {\n            makeChart_substance(type, time);\n            $('#table_substance').html('<table class=\"table\" id=\"table_substance\"><tr><th>Present</th><th>Not Present</th></tr><tr><td class=\"type_substance0\">' + type[time].Yes + '%</td><td class=\"type_substance1\">' + type[time].No + '%</td></tr></table>');\n        })\n\n    };\n\n\n\n    function makeChart_substance(data_substance, i) {\n        var blockArray_substance = [];\n        var noOfBlocks_No = Math.round(data_substance[i].No);\n        var noOfBlocks_Yes = Math.round(data_substance[i].Yes);\n        var blocksAdded = 0;\n        blockArray = addBlocks_substance(\"#people\", noOfBlocks_Yes, noOfBlocks_No, data_substance, blockArray_substance, i);\n        addBlock_substance(\"#people\", blockArray_substance, 0);\n    }\n\n    function addBlocks_substance(id, noOfBlocks_Yes, noOfBlocks_No, data_substance, blockArray_substance, i) {\n        for (b = 0; b < noOfBlocks_No; b++) {\n            blockArray_substance.push('<div class=\"block type_substance' + 1 + ' data-index=' + data_substance[i].No + '\">' + '</div>');\n        };\n        for (b = 0; b < noOfBlocks_Yes; b++) {\n            $(id).append('<div class=\"block type_substance' + 0 + ' data-index=' + data_substance[i].Yes + '\">' + '</div>');\n        };\n        return blockArray_substance;\n\n    }\n\n    function addBlock_substance(id, blockArray_substance, i) {\n        if (i < blockArray.length) {\n            $(id).append(blockArray_substance[i]);\n            i++;\n            addBlock_substance(id, blockArray_substance, i);\n        }\n    }\n\n\n    ////////////////////////\n    //PIE CHART\n    ///////////////////////\n\n    var margin = {\n        top: 10,\n        bottom: 10,\n        left: 10,\n        right: 0\n    };\n    var width = 550 - margin.left - margin.right,\n        height = 300 - margin.top - margin.bottom;\n\n    var labelsWidth = width * 0.4;\n    var labelWidth = labelsWidth * 0.1;\n    var labelHeight = labelWidth * 0.6;\n\n    var animateDuration = 300;\n    var outerRadius = width - labelsWidth < height ? (width - labelsWidth) / 2 : height / 2;\n    var innerRadius = outerRadius * 0.5; // 40%\n\n    var arc = d3.svg.arc()\n        .innerRadius(innerRadius)\n        .outerRadius(outerRadius);\n\n    var pie = d3.layout\n        .pie()\n        .sort(null)\n        .value(getValue)\n        .startAngle(1.1 * Math.PI)\n        .endAngle(3.1 * Math.PI);\n\n    var explodedIndex;\n    var color = d3.scale.ordinal()\n        .range([\"#b71c1c\", \"#d32f2f\", \"#f44336\", \"#ef5350\", \"#e57373\", \"#ef9a9a\"]);\n\n    var $pie_substance = d3.select('#piechart')\n        .attr({\n            width: width + margin.left + margin.right,\n            height: height + margin.top + margin.bottom\n        })\n        .append('g')\n        .attr({\n            class: 'labels',\n            transform: 'translate(' + (width - (labelsWidth + margin.right)) + ', ' + margin.top + ')'\n        })\n        .select(getParent)\n        .append('g')\n        .attr({\n            class: 'pie',\n            transform: 'translate(' + (outerRadius + margin.left) + ', ' + (height / 2 + margin.top) + ')'\n        })\n        .select(getParent)\n        .append('g')\n        .attr({\n            class: 'main-legend',\n            transform: 'translate(' + (outerRadius + margin.left) + ', ' + (outerRadius + margin.top) + ')'\n        })\n        .select(getParent);\n\n    $pie_substance.select('.main-legend')\n        .append('circle')\n        .attr({\n            class: 'border',\n            opacity: 0,\n            stroke: 'rgba(255,255,255,1)',\n            fill: 'rgba(0,0,0,0)',\n            r: innerRadius * 0.9\n        })\n        .select(getParent)\n        .append('circle')\n        .attr({\n            class: 'circle',\n            opacity: 0,\n            fill: 'rgba(255,255,255,1)',\n            r: innerRadius * 0.9\n        })\n        .select(getParent)\n        .append('line')\n        .attr({\n            opacity: 0,\n            stroke: 'rgba(255,255,255,1)',\n            x1: 0,\n            y1: 0,\n            x2: 0,\n            y2: 0\n        })\n        .select(getParent)\n        .append('text')\n        .attr({\n            class: 'legend-title',\n            'font-size': '18px',\n            y: -1 * innerRadius * 0.13,\n            'font-family': 'Arial',\n            'text-anchor': 'middle',\n            'alignment-baseline': 'middle',\n            fill: '#fff'\n        })\n\n    .select(getParent)\n        .append('text')\n        .attr({\n            class: 'description',\n            'font-size': '14px',\n            y: innerRadius * 0.13,\n            'font-family': 'Arial',\n            'text-anchor': 'middle',\n            'alignment-baseline': 'middle',\n            fill: '#fff'\n        });\n\n    function getParent() {\n        return this.parentNode;\n    }\n\n    function getValue(d) {\n        return d.value;\n    }\n\n\n    function getSum(data) {\n        var _sum = 0;\n        data.forEach(function addValue(item) {\n            _sum += item.value;\n        });\n        return _sum;\n    }\n\n    function arcTween(d) {\n        var i;\n\n        function toArc(t) {\n            return arc(i(t));\n        }\n\n        function toEndAngle(t) {\n            d.endAngle = i(t);\n            return arc(d);\n        }\n\n        if ('undefined' === typeof this._current) {\n            i = d3.interpolate(d.startAngle + 0.1, d.endAngle);\n            this._current = d;\n            return toEndAngle;\n        }\n        i = d3.interpolate(this._current, d);\n        this._current = i(0);\n        return toArc;\n    }\n\n    function labelAnimation(d) {\n        return 'translate (' + arc.centroid(d) + ')';\n    }\n\n    function fill(d, i) {\n        return color(i);\n    }\n\n    function selectArcAnimation(_d) {\n        var dist = outerRadius * 0.05;\n        _d.midAngle = ((_d.endAngle - _d.startAngle) / 2) + _d.startAngle;\n        var x = Math.sin(_d.midAngle) * dist;\n        var y = -Math.cos(_d.midAngle) * dist;\n        return 'translate(' + x + ',' + y + ')';\n    }\n\n    function updatePie(data) {\n        var sum = getSum(data);\n        data = pie(data);\n        var arcs = $pie_substance.select('.pie')\n            .selectAll('.arc')\n            .data(data);\n\n        var isDelay = arcs.selectAll('path').length;\n        var _duration = isDelay ? animateDuration : animateDuration / 2;\n\n        function getPercent(d) {\n            return ((d.value / sum) * 100).toFixed(1) + '%';\n        }\n\n        function getLegend(d) {\n            return d.data.name + ' Present | ' + d.data.value;\n        }\n\n        function liveLarge(d) {\n            var angle = 360 * (d.value / sum);\n            var arcLength = (Math.PI * (outerRadius / 2) * angle) / 180;\n            return arcLength > Math.PI * outerRadius * 0.01;\n        }\n\n        function onMouseIn(d, i) {\n            explodedIndex = i;\n            onClick(d, i);\n\n            function onClick(d, i) {\n\n                console.log(d.data.option);\n                $('.substance-type').html(d.data.description);\n                $('#total').html(d.data.value);\n                if (d.data.option == \"buprenorphine\") {\n                    $('#timeline_blocks').attr('max', 0);\n                } else {\n                    $('#timeline_blocks').attr('max', 3);\n                };\n                data_substance = eval(d.data.option);\n                asignVal_substance(data_substance, time);\n            };\n\n\n            var label = $pie_substance.selectAll('.legend')\n                .filter(function(_d, _i) {\n                    return i === _i;\n                });\n            if (!label.attr('data-exit')) {\n                label.transition()\n                    .duration(animateDuration / 2)\n                    .attr({\n                        opacity: 1,\n                        transform: 'translate(10, ' + ((labelHeight + 5) * i) + ')'\n                    });\n            }\n\n\n            $pie_substance.selectAll('.arc')\n                .filter(function(_d, _i) {\n                    return i === _i;\n                })\n                .transition()\n                .duration(animateDuration / 2)\n                .attr('transform', selectArcAnimation);\n\n            $pie_substance.select('.main-legend')\n                .select('.border')\n                .transition()\n                .duration(animateDuration / 2)\n                .attr({\n                    opacity: 1,\n                    stroke: fill(null, i)\n                });\n\n            $pie_substance.select('.main-legend')\n                .select('.circle')\n                .transition()\n                .duration(animateDuration / 2)\n                .attr({\n                    opacity: 1,\n                    fill: fill(null, i)\n                });\n\n            $pie_substance.select('.main-legend')\n                .select('line')\n                .transition()\n                .duration(animateDuration / 2)\n                .attr({\n                    opacity: 1,\n                    stroke: fill(null, i),\n                    x1: Math.sin(d.midAngle) * (innerRadius * 0.7),\n                    y1: -Math.cos(d.midAngle) * (innerRadius * 0.7),\n                    x2: Math.sin(d.midAngle) * innerRadius,\n                    y2: -Math.cos(d.midAngle) * innerRadius\n                });\n\n            $pie_substance.select('.main-legend')\n                .select('.legend-title')\n                .text(d.data.name)\n                // .append(d.data.name[1])\n                .select(getParent)\n                .select('.description')\n                .text(d.data.value)\n        }\n\n        function onMouseOut(d, i) {\n            $pie_substance.select('.main-legend')\n                .selectAll(['.circle', '.border'])\n                .transition()\n                .duration(animateDuration / 2)\n                .attr({\n                    opacity: 0\n                });\n\n            $pie_substance.select('.main-legend')\n                .select('line')\n                .transition()\n                .duration(animateDuration / 2)\n                .attr({\n                    opacity: 0\n                });\n\n            $pie_substance.select('.main-legend')\n                .select('.legend-title')\n                .text('')\n                .select(getParent)\n                .select('.description')\n                .text('');\n\n            if ('undefined' === typeof i) {\n                return;\n            }\n            var label = $pie_substance.selectAll('.legend')\n                .filter(function(_d, _i) {\n                    return i === _i;\n                });\n\n            if (!label.attr('data-exit')) {\n                label.transition()\n                    .duration(animateDuration / 2)\n                    .attr({\n                        opacity: 1,\n                        transform: 'translate(0, ' + ((labelHeight + 5) * i) + ')'\n                    });\n            }\n\n            $pie_substance.selectAll('.arc')\n                .filter(function(_d, _i) {\n                    return i === _i;\n                })\n                .transition()\n                .duration(animateDuration / 2)\n                .attr({\n                    transform: 'translate(0,0)'\n                });\n        }\n\n        onMouseOut();\n        // update Pie\n\n        arcs.enter()\n            .append('g')\n            .attr('class', 'arc')\n\n        .on('click', function(d, i) {\n                // onMouseOut.call($(this).parent(), d, i);\n                // console.log($(this));\n                if (explodedIndex >= 0) {\n                    onMouseOut(null, explodedIndex);\n                }\n                onMouseIn(d, i);\n            })\n            //.on('mouseout', onMouseOut)\n            // .on('mouseout', onMouseOut)\n            .append('path')\n            .attr({\n                fill: fill\n            })\n            .attr(\"d\", arc).style('stroke', 'white')\n            .style('stroke-width', 2)\n            .select(getParent)\n            .filter(liveLarge)\n            .append('text')\n            .attr({\n                'font-family': 'Arial',\n                'font-size': '14px',\n                fill: '#fff',\n                'text-anchor': 'middle'\n            });\n\n\n        arcs.select('path')\n            .transition()\n            .delay(function delayFn(d, i) {\n                return isDelay ? 0 : _duration * i;\n            })\n            .duration(_duration)\n            .attrTween('d', arcTween);\n\n        arcs.select('text')\n            .text(getPercent)\n            .transition()\n            .duration(animateDuration)\n            .attr({\n                class: 'label-content',\n                transform: labelAnimation\n            });\n\n        arcs.exit()\n            .on('mouseenter', null)\n            .on('mouseout', null)\n            .remove();\n\n        // Update Legends\n\n        var legends = $pie_substance\n            .select('.labels')\n            .selectAll('.legend')\n            .data(data);\n\n        legends.enter()\n            .append('g')\n            .on('click', function(d, i) {\n                // onMouseOut.call($(this).parent(), d, i);\n                // console.log($(this));\n                if (explodedIndex >= 0) {\n                    onMouseOut(null, explodedIndex);\n                }\n                onMouseIn(d, i);\n            })\n            .attr('class', 'legend')\n            .append('rect')\n            .attr({\n                width: labelWidth,\n                height: labelHeight,\n                fill: fill\n            })\n            .select(getParent)\n            .append('text')\n            .attr({\n                'font-size': '14px',\n                'font-family': 'Arial',\n                fill: '#666',\n                x: labelWidth + 5,\n                y: labelHeight / 2 + 5\n            })\n            .select(getParent)\n            .attr({\n                opacity: 0,\n                transform: function(d, i) {\n                    return 'translate(15, ' + ((labelHeight + 5) * i) + ')';\n                }\n            })\n            .transition()\n            .duration(animateDuration)\n            .attr({\n                opacity: 1,\n                transform: function(d, i) {\n                    return 'translate(0, ' + ((labelHeight + 5) * i) + ')';\n                }\n            });\n\n        legends.exit()\n            .on('mouseenter', null)\n            .on('mouseout', null)\n            .attr('data-exit', true)\n            .transition()\n            .duration(animateDuration / 2)\n            .attr({\n                opacity: 0,\n                transform: function(d, i) {\n                    return 'translate(-15, ' + ((labelHeight + 5) * i) + ')';\n                }\n            })\n            .remove();\n\n\n\n        legends.select('text').html(getLegend);\n\n    }\n\n    var data_pie = [\n        { name: 'Heroin', value: 867, option: 'heroin', description: 'heroin' },\n        { name: 'Fentanyl', value: 288, option: 'fentanyl', description: 'fentanyl' },\n        { name: 'Fentanyl & Heroin', value: 249, option: 'both', description: 'both fentanyl and heroin' },\n        { name: 'Prescription Opioid', value: 154, option: 'prescription', description: 'prescription opioid' },\n        { name: 'Methadone', value: 84, option: 'methadone', description: 'methadone' },\n        { name: 'Buprenorphine', value: 15, option: 'buprenorphine', description: 'buprenorphine' },\n    ];\n\n    generatePie(data_pie);\n\n\n    function generatePie(data) {\n        updatePie(data);\n    }\n\n\n\n})\n","$(document).ready(function() {\n\n    var prescription = [\n        [0, 0],\n        [\"No\", 58],\n        [\"Yes\", 13],\n        [\"Yes\", 8],\n        [\"No\", 21],\n        [0, 0]\n    ];\n    var heroin = [\n        [0, 0],\n        [\"No\", 22],\n        [\"Yes\", 49],\n        [\"Yes\", 17],\n        [\"No\", 12],\n        [0, 0]\n    ];\n\n    var multi = [\n        [\"1\", 15],\n        [\"2\", 31],\n        [\"3\", 25],\n        [\"3\", 18],\n        [\"2\", 9],\n        [\"1\", 2]\n    ];\n\n\n    // var person = '<svg width=\"10\" height=\"10\"><path d=\"M12.6,18.4c0-1,0-2,0-3c0-1.4,0.7-2.5,2-3.1c0.8-0.4,1.6-0.6,2.5-0.6c1,0,1.9,0,2.9,0c1,0,1.9,0.3,2.8,0.8c1,0.6,1.6,1.6,1.6,2.7c0,2.1,0,4.1,0,6.2c0,1.3-0.3,2.5-1.1,3.6c-0.2,0.2-0.4,0.4-0.6,0.6c-0.1,0.1-0.2,0.2-0.2,0.4c-0.2,0.8-0.4,1.6-0.5,2.5c-0.3,1.8-0.6,3.5-0.9,5.3c-0.2,1-0.8,1.5-1.8,1.5c-0.5,0-1.1,0-1.6,0c-0.2,0-0.3,0-0.5,0c-0.6-0.1-1.2-0.7-1.3-1.4c-0.3-1.6-0.5-3.2-0.8-4.9c-0.1-0.8-0.3-1.6-0.5-2.5c-0.1-0.4-0.2-0.7-0.5-1c-0.5-0.5-0.8-1.1-1-1.8c-0.3-0.8-0.4-1.6-0.4-2.5C12.6,20.3,12.6,19.3,12.6,18.4z\"/><path d=\"M13.6,6c0-2.4,1.9-4.7,4.7-4.7c2.7,0,4.8,2.1,4.8,4.8c0,2.7-2.1,4.7-4.7,4.7C15.7,10.7,13.6,8.6,13.6,6z\"/></svg>'\n    // console.log(person);\n    var table_html = [\n        '<table class=\"table\" id=\"table_gender\"><tr><th></th><th>Present</th><th>Not Present</th></tr><tr><th>Male</th><td class=\"type_gender2\">' + prescription[2][1] + '%</td><td class=\"type_gender1\">' + prescription[1][1] + '%</td></tr><tr><th>Female</th><td class=\"type_gender3\">' + prescription[3][1] + '%</td><td class=\"type_gender4\">' + prescription[4][1] + '%</td></tr></table>',\n        '<table class=\"table\" id=\"table_gender\"><tr><th></th><th>Present</th><th>Not Present</th></tr><tr><th>Male</th><td class=\"type_gender2\">' + heroin[2][1] + '%</td><td class=\"type_gender1\">' + heroin[1][1] + '%</td></tr><tr><th>Female</th><td class=\"type_gender3\">' + heroin[3][1] + '%</td><td class=\"type_gender4\">' + heroin[4][1] + '%</td></tr></table>',\n        '<table class=\"table\" id=\"table_gender\"><tr><th></th><th>0 Prescribers</th><th>12 Prescribers</th><th>3+ Prescribers</th></tr><tr><th>Male</th><td td class=\"type_gender0\">' + multi[0][1] + '%</td><td td class=\"type_gender1\">' + multi[1][1] + '%</td><td td class=\"type_gender2\">' + multi[2][1] + '%</td></tr><tr><th>Female</th><td td class=\"type_gender5\">' + multi[5][1] + '%</td><td td class=\"type_gender4\">' + multi[4][1] + '%</td><td td class=\"type_gender3\">' + multi[3][1] + '%</td></tr></table>'\n    ];\n\n\n    var data_gender = prescription;\n\n\n    //Set initial values\n    makeChart_gender(prescription);\n    $('#table_gender').html(table_html[0]);\n    $(\"#prescription\").addClass(\"active\");\n\n    //Link text controls\n    $('.controls-block').click(function() {\n        var $option = $(this).data('select');\n        var $value = eval($(this).val());\n        asignVal_gender($option, $value);\n    });\n\n    //Link button controls\n    $('.btn-blocks').click(function() {\n        var $option = $(this).attr('id');\n        var $value = eval($(this).val());\n        asignVal_gender($option, $value);\n    });\n\n\n    function asignVal_gender(option, value) {\n        $(\"#buttons-blocks button\").removeClass(\"active\");\n        $('#' + option).addClass('active');\n        $(\"#gender\").empty();\n        makeChart_gender(eval(option));\n        $('#table_gender').html(table_html[value]);\n    };\n\n\n    function makeChart_gender(data_gender) {\n\n        var blockArray = [];\n        for (i = 0; i < 6; i++) {\n            var noOfBlocks_gender = Math.round(data_gender[i][1]);\n            var blocksAdded = 0;\n            blockArray_gender = addBlocks_gender(\"#gender\", noOfBlocks_gender, data_gender, blockArray);\n        }\n        addBlock_gender(\"#gender\", blockArray_gender, 0);\n    }\n\n    function addBlock_gender(id, blockArray, i) {\n        if (i < blockArray.length) {\n            $(id).append(blockArray[i]);\n            i++;\n            //timeout += 1;\n            // setTimeout(function() {\n            addBlock_gender(id, blockArray, i);\n            //})\n        }\n    }\n\n\n    function addBlocks_gender(id, noOfBlocks, data_gender, blockArray) {\n        for (b = 0; b < noOfBlocks; b++) {\n            // blockArray.push('<div class=\"block type' + i + '\">' + '<p>' + data[i][0] + '</p></div>');\n            blockArray.push('<div class=\"block type_gender' + i + ' data-index=' + data_gender[i][0] + '\">' + '</div>');\n            // $(id).append('<div class=\"block type'+i+'\"><p>'+ data[i][0] +'</p></div>');\n        }\n        return blockArray;\n    }\n\n})\n\n\n// var $block = document.getElementByClassName('block');\n// $(\".block\").hover(function() { console.log($(this).dataset.index); });\n","(function() {\r\n\r\n    var width = 600;\r\n    var height = 250;\r\n    var selected;\r\n\r\n\r\n\r\n    //setup the svg\r\n\r\n    var $bars_age = d3.select(\"#changing_bars\").append(\"svg\")\r\n        .attr(\"width\", width + 100)\r\n        .attr(\"height\", height + 100); // adding some random padding\r\n    $bars_age.append(\"rect\")\r\n        .attr(\"width\", \"100%\")\r\n        .attr(\"height\", \"100%\")\r\n        .attr(\"fill\", \"none\");\r\n\r\n\r\n\r\n    d3.csv(\"js/data/bars-age.csv\", function(error, data) {\r\n\r\n            var selected = \"percentOpiodDeaths\";\r\n            //console.log(column);\r\n            var dataset = drawGraph(data, selected); // you need to finish this function below.\r\n            //\r\n            // //console.log(column, dataset);\r\n            //\r\n            redraw(dataset, selected);\r\n\r\n            d3.select(\"#POD\").classed(\"selected\", true);\r\n            $(\"#POD\").addClass(\"active\");\r\n\r\n            d3.select(\"#POD\")\r\n                .on(\"click\", function(d, i) {\r\n                    selected = \"percentOpiodDeaths\"\r\n                    dataset = drawGraph(data, selected);\r\n                    redraw(dataset, selected);\r\n                    var thisButton = d3.select(this);\r\n                    d3.selectAll(\"#buttons-bar button\").classed(\"selected\", false);\r\n                    $(\"#buttons-bar button\").removeClass(\"active\");\r\n                    thisButton.classed(\"selected\", true);\r\n                    $(this).addClass(\"active\");\r\n                });\r\n            d3.select(\"#DR\")\r\n                .on(\"click\", function(d, i) {\r\n                    selected = \"deathRate\"\r\n                    dataset = drawGraph(data, selected);\r\n                    redraw(dataset, selected);\r\n                    var thisButton = d3.select(this);\r\n                    d3.selectAll(\"#buttons-bar button\").classed(\"selected\", false);\r\n                    $(\"#buttons-bar button\").removeClass(\"active\");\r\n                    thisButton.classed(\"selected\", true);\r\n                    $(this).addClass(\"active\");\r\n                });\r\n            d3.select(\"#NOD\")\r\n                .on(\"click\", function(d, i) {\r\n                    selected = \"numberOpioidDeaths\"\r\n                    dataset = drawGraph(data, selected);\r\n                    redraw(dataset, selected);\r\n                    var thisButton = d3.select(this);\r\n                    d3.selectAll(\"#buttons-bar button\").classed(\"selected\", false);\r\n                    $(\"#buttons-bar button\").removeClass(\"active\");\r\n                    thisButton.classed(\"selected\", true);\r\n                    $(this).addClass(\"active\");\r\n\r\n                });\r\n\r\n\r\n            //setup our ui -- requires access to data variable, so inside csv\r\n            // d3.select(\"#menu select\")\r\n            //     .on(\"change\", function() {\r\n            //         column = d3.select(\"#menu select\").property(\"value\");\r\n            //         dataset = drawGraph(data, column);\r\n            //         //console.log(column, dataset);\r\n            //         redraw(dataset, column);\r\n            // });\r\n\r\n        }) // end csv\r\n\r\n    //make the bars for the first data set.  They will be red at first.\r\n\r\n    function drawGraph(data, column) {\r\n\r\n        return data.sort(function(a, b) {\r\n            return b[column] - a[column]; // descending order, biggest at the top!\r\n        }); // cut off the top 10!\r\n\r\n    }\r\n\r\n    // This function is used to draw and update the data. It takes different data each time.\r\n\r\n    function redraw(data, column) {\r\n\r\n        var max = d3.max(data, function(d) {\r\n            return +d[column];\r\n        });\r\n\r\n        xScale = d3.scale.linear()\r\n            .domain([0, max])\r\n            .range([0, width]);\r\n\r\n        yScale = d3.scale.ordinal()\r\n            .domain(d3.range(data.length))\r\n            .rangeBands([0, height], .2);\r\n\r\n        // yScale = function calc(e){return i[((u.get(e)||(\"range\"===t.t?u.set(e,n.push(e)):0/0))-1)%i.length]};\r\n\r\n\r\n        var bars = $bars_age.selectAll(\"rect.bar\")\r\n            .data(data, function(d) {\r\n                return d.gender_age;\r\n            }); // key function!\r\n\r\n        //update -- existing bars get blue when we \"redraw\". We don't change labels.\r\n        // bars\r\n        //   .attr(\"fill\", \"steelblue\");\r\n\r\n        //enter - new bars get set to darkorange when we \"redraw.\"\r\n        bars.enter()\r\n            .append(\"rect\")\r\n            .attr(\"class\", \"bar\");\r\n        // .attr(\"fill\", \"steelblue\");\r\n\r\n        //exit -- remove ones that aren't in the index set\r\n        bars.exit()\r\n            .transition()\r\n            .duration(200)\r\n            .ease(\"exp\")\r\n            .attr(\"width\", 0)\r\n            .remove();\r\n\r\n        //console.log(yScale);\r\n        // transition -- move the bars to proper widths and location\r\n        bars\r\n            .transition()\r\n            .duration(500)\r\n            .ease(\"quad\")\r\n            .attr(\"width\", function(d) {\r\n                return xScale(+d[column]);\r\n            })\r\n            .attr(\"height\", yScale.rangeBand())\r\n            .attr(\"transform\", function(d, i) {\r\n                return \"translate(\" + [0, yScale(i)] + \")\";\r\n            })\r\n            .attr(\"class\", function(d, i) {\r\n                if (d.gender === 'Male') {\r\n                    return \"bar malFocus\";\r\n                } else if (d.gender === 'Female') {\r\n                    return \"bar femFocus\";\r\n                }\r\n            });\r\n\r\n\r\n        //  We are attaching the labels separately, not in a group with the bars...\r\n\r\n        var labels = $bars_age.selectAll(\"text.labels\")\r\n            .data(data, function(d) {\r\n                return d.gender_age\r\n            }); // key function!\r\n\r\n\r\n        // everything gets a class and a text field.  But we assign attributes in the transition.\r\n        labels.enter()\r\n            .append(\"text\")\r\n            .attr(\"class\", \"labels\");\r\n\r\n\r\n        labels.exit()\r\n            .remove();\r\n\r\n        labels.transition()\r\n            .duration(500)\r\n            .attr(\"transform\", function(d, i) {\r\n                return \"translate(\" + xScale(+d[column]) + \",\" + yScale(i) + \")\"\r\n            })\r\n            .text(function(d) {\r\n               // console.log(column);\r\n                if(column == \"percentOpiodDeaths\") {\r\n                    return d.age + \" (\" + (d[column]) + \"%)\";\r\n                }\r\n                else {\r\n                    return d.age + \" (\" + (d[column]) + \")\";\r\n                }\r\n            })\r\n            .attr(\"dy\", \"1.2em\")\r\n            .attr(\"dx\", \"5px\")\r\n            .attr(\"text-anchor\", \"start\");\r\n\r\n\r\n    } // end of draw function\r\n})();\r\n"],"sourceRoot":"/source/"}